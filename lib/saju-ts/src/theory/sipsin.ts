/**
 * 십신론(十神論) — 십성(十星)의 의미와 특성
 *
 * 십신(十神)이란 일간(日干)을 기준으로 나머지 천간·지지와의
 * 오행(五行) 생극(生剋) 관계 및 음양(陰陽) 동이(同異)에 따라
 * 분류한 열 가지 별칭(星稱)이다.
 *
 * 자평진전(子平眞詮) 및 명리정종(命理正宗) 이론에 근거한다.
 *
 * 분류 체계:
 *   - 비겁(比劫): 비견(比肩), 겁재(劫財)
 *   - 식상(食傷): 식신(食神), 상관(傷官)
 *   - 재성(財星): 편재(偏財), 정재(正財)
 *   - 관성(官星): 편관(偏官), 정관(正官)
 *   - 인성(印星): 편인(偏印), 정인(正印)
 */

import type { TenGod } from '../core/tenGod.js';
import { tenGodOf } from '../core/tenGod.js';

// ---------------------------------------------------------------------------
// 기본 타입
// ---------------------------------------------------------------------------

/**
 * 십신 로마자 식별자
 *
 * 기존 {@link TenGod} 타입과 완전히 동일하며,
 * 이론 모듈에서 사용할 별칭(alias)을 제공한다.
 */
export type Sipsin = TenGod;

// ---------------------------------------------------------------------------
// 상세 이론 데이터 인터페이스
// ---------------------------------------------------------------------------

/**
 * 십신 상세 이론 데이터
 *
 * 자평진전(子平眞詮) 기반의 십신 각론 데이터를 담는다.
 */
export interface SipsinData {
  /** 십신 식별자 (로마자) */
  name: Sipsin;
  /** 한자 표기 — 예: '比肩' */
  hanja: string;
  /** 한글 표기 — 예: '비견' */
  hangul: string;

  /**
   * 오행 관계
   *
   * 일간(日干)과 해당 십신의 오행 생극 관계를 기술한다.
   * 형식: '同(동)', '生我(생아)', '我生(아생)', '克我(극아)', '我克(아극)'
   */
  elementRelation: string;

  /**
   * 음양 관계
   *
   * 일간과 해당 십신의 음양 동이(同異)를 기술한다.
   * 형식: '同極(동극)', '異極(이극)'
   */
  eumyangRelation: string;

  /**
   * 육친(六親) — 남성 기준
   *
   * 일간이 남성일 때 해당 십신이 상징하는 인척 관계.
   */
  yukChinMale: string;

  /**
   * 육친(六親) — 여성 기준
   *
   * 일간이 여성일 때 해당 십신이 상징하는 인척 관계.
   */
  yukChinFemale: string;

  /**
   * 상징 의미
   *
   * 해당 십신이 상징하는 사물·현상·개념의 목록.
   */
  symbolism: string[];

  /**
   * 직업·적성
   *
   * 해당 십신이 강하게 발현될 때 어울리는 직업 및 적성.
   */
  career: string[];

  /**
   * 성격 특성 (중립)
   *
   * 해당 십신의 일반적인 성격 경향성.
   */
  personality: string[];

  /**
   * 긍정적 특성
   *
   * 십신이 균형 있게 발현될 때 드러나는 장점.
   */
  positive: string[];

  /**
   * 부정적 특성
   *
   * 십신이 과다하거나 편중되었을 때 드러나는 단점.
   */
  negative: string[];

  /**
   * 관련 신체 부위
   *
   * 해당 십신이 건강 측면에서 관장하는 신체 부위.
   */
  bodyPart: string;

  /**
   * 발현 조건
   *
   * 해당 십신이 길하게 또는 흉하게 발현되는 사주 조건.
   */
  conditions: string;

  /**
   * 격국(格局)에서의 역할
   *
   * 십신이 격국의 용신(用神)·희신(喜神) 또는 기신(忌神)으로
   * 작용할 때의 의미.
   */
  gyeokgukRole: string;
}

// ---------------------------------------------------------------------------
// 십신 상세 데이터 테이블
// ---------------------------------------------------------------------------

/**
 * 십신 상세 이론 데이터 테이블
 *
 * 비견(比肩)부터 정인(正印)까지 열 가지 십신의 완전한 이론 데이터.
 * 순서는 전통적인 비겁 → 식상 → 재성 → 관성 → 인성 순.
 */
export const SIPSIN_TABLE: SipsinData[] = [
  // ── 비겁(比劫) ─────────────────────────────────────────────────────────

  {
    name:            'BI_GYEON',
    hanja:           '比肩',
    hangul:          '비견',
    elementRelation: '同(동) — 일간과 같은 오행',
    eumyangRelation: '同極(동극) — 일간과 같은 음양',
    yukChinMale:     '형제(兄弟)·친구·동료',
    yukChinFemale:   '자매(姉妹)·친구·동료',
    symbolism: [
      '경쟁자', '공동사업', '동업자', '독립심', '자존심',
      '형제자매', '어깨를 나란히 하는 존재',
    ],
    career: [
      '자영업·독립 창업', '스포츠 선수', '개인 사업가',
      '프리랜서', '무술·체육 관련직',
    ],
    personality: [
      '자기 주관이 뚜렷하다', '독립적이고 자립심이 강하다',
      '경쟁심이 있다', '타인의 간섭을 싫어한다',
    ],
    positive: [
      '독립적이고 자립심 강함', '주관과 소신이 분명함',
      '끈기와 지구력이 있음', '의리를 중시함',
    ],
    negative: [
      '지나친 경쟁심과 질투', '고집이 세고 독단적',
      '타협을 잘 못함', '재물을 나눠야 하는 구조(재성 분산)',
    ],
    bodyPart:    '근육·피부·척추',
    conditions:
      '일주에 비견이 많으면 독립심 강하나 고집이 세지고 재물이 분산된다. ' +
      '재성(財星)이 약할 때 비견이 과다하면 재물 손실 및 형제 분쟁이 우려된다.',
    gyeokgukRole:
      '신약(身弱) 사주에서 일간을 돕는 희신(喜神)으로 작용한다. ' +
      '신강(身强) 사주에서 재성·관성이 용신일 때는 기신(忌神)이 된다. ' +
      '비겁격(比劫格)은 독립·경쟁의 명으로 자수성가(自手成家) 기질이 강하다.',
  },

  {
    name:            'GEOB_JAE',
    hanja:           '劫財',
    hangul:          '겁재',
    elementRelation: '同(동) — 일간과 같은 오행',
    eumyangRelation: '異極(이극) — 일간과 다른 음양',
    yukChinMale:     '이복형제(異腹兄弟)·재물 탈취자',
    yukChinFemale:   '이복자매·경쟁 관계의 여성',
    symbolism: [
      '재물 탈취', '경쟁', '이복형제', '투기', '강탈',
      '횡재와 횡액', '충동적 행동',
    ],
    career: [
      '투기·도박업(위험)', '세일즈·영업직', '격투기·무술',
      '개혁·혁신 관련직', '금융 트레이더',
    ],
    personality: [
      '추진력이 강하다', '활동적이고 적극적이다',
      '충동적인 면이 있다', '승부욕이 강하다',
    ],
    positive: [
      '강한 추진력과 결단력', '활동적이고 에너지가 넘침',
      '목표 달성 의지가 강함', '역경에 굴하지 않는 불굴의 정신',
    ],
    negative: [
      '투기·사행심(射倖心)', '재물 손실과 탕진',
      '충동적 행동으로 인한 사고', '형제·동업자 간 재물 분쟁',
    ],
    bodyPart:    '담(膽)·혈액 순환계·사지(四肢)',
    conditions:
      '겁재가 많으면 처(妻) 덕이 없고 재물이 모이지 않는다. ' +
      '관성(官星)이 겁재를 제화(制化)하면 오히려 추진력 있는 사업가형이 된다. ' +
      '재성이 강하고 겁재가 하나면 재물 운영 능력이 탁월하다.',
    gyeokgukRole:
      '비견과 마찬가지로 신약 사주의 희신이나, 겁재는 음양이 달라 더 충동적이다. ' +
      '겁재격(劫財格)은 대개 용신 제화(制化)가 필요하며, ' +
      '편관(偏官)이 겁재를 제어하면 군인·경찰·검사 등 강직한 직업에 적합하다.',
  },

  // ── 식상(食傷) ─────────────────────────────────────────────────────────

  {
    name:            'SIK_SHIN',
    hanja:           '食神',
    hangul:          '식신',
    elementRelation: '我生(아생) — 일간이 생하는 오행',
    eumyangRelation: '同極(동극) — 일간과 같은 음양',
    yukChinMale:     '장모(丈母)·할머니(외조모)',
    yukChinFemale:   '자녀(子女) — 특히 딸',
    symbolism: [
      '먹을 복(食福)', '재능', '식복(食祿)', '수명성(壽命星)',
      '낙천주의', '여유', '의식주(衣食住)', '언어·표현',
    ],
    career: [
      '요리사·식품 관련업', '예술가·문인', '교육자',
      '의료·복지업', '서비스·접객업', '창작·콘텐츠 업종',
    ],
    personality: [
      '낙천적이고 여유롭다', '먹고 즐기는 것을 좋아한다',
      '창의적이고 예술적 감각이 있다', '남을 잘 챙긴다',
    ],
    positive: [
      '낙천적이고 긍정적인 사고', '창의적 재능과 예술성',
      '먹복(食福)과 풍족한 삶', '타인에 대한 배려심',
    ],
    negative: [
      '게으름과 나태함', '방종과 절제력 부족',
      '욕구에 따른 충동 소비', '관성(官星) 약화(상관보다는 약하나 존재함)',
    ],
    bodyPart:    '위장(胃)·소화기계·입',
    conditions:
      '식신이 생왕(生旺)하고 재성(財星)이 있으면 의식주가 풍족하다. ' +
      '편인(偏印)이 식신을 극하면 도식(倒食)이 되어 식복이 줄어든다. ' +
      '식신제살(食神制殺) — 편관(七殺)을 식신이 제어하면 귀격(貴格)이 된다.',
    gyeokgukRole:
      '식신격(食神格)은 온화하고 여유로운 삶을 영위한다. ' +
      '식신이 용신일 때 편인이 많으면 도식(倒食)으로 흉변하므로 재성(財星)으로 ' +
      '편인을 제화해야 한다. 식신생재(食神生財)는 최상의 구조로 꼽힌다.',
  },

  {
    name:            'SANG_GWAN',
    hanja:           '傷官',
    hangul:          '상관',
    elementRelation: '我生(아생) — 일간이 생하는 오행',
    eumyangRelation: '異極(이극) — 일간과 다른 음양',
    yukChinMale:     '할머니(외조모)·손아래 형제',
    yukChinFemale:   '자녀(子女) — 특히 아들',
    symbolism: [
      '관성 상해(官星傷害)', '재능', '예술', '표현력',
      '비판정신', '반항심', '총명함', '혁신',
    ],
    career: [
      '예술가·연예인', '법률가·변호사', '언론인·작가',
      '연구자·학자', '프리랜서', '혁신 기업가',
    ],
    personality: [
      '총명하고 언변이 뛰어나다', '예술적 감각과 표현력이 강하다',
      '규칙과 권위에 저항하는 경향이 있다', '자기 표현 욕구가 강하다',
    ],
    positive: [
      '뛰어난 총명함과 재능', '강한 예술적 표현력',
      '혁신적 사고와 창의성', '논리적 비판 능력',
    ],
    negative: [
      '관재구설(官災口舌)에 시달림', '규칙·법규 위반 경향',
      '자기 과시와 교만', '직장생활 부적응(직상 관계 불화)',
    ],
    bodyPart:    '폐(肺)·기관지·언어기관·피부',
    conditions:
      '상관이 관성을 직접 극하면 관재·직업 손실의 우려가 있다. ' +
      '상관패인(傷官佩印) — 인성(印星)이 상관을 제화하면 귀격이 된다. ' +
      '상관생재(傷官生財) — 재성이 있으면 재물 능력이 탁월하다.',
    gyeokgukRole:
      '상관격(傷官格)은 재능이 뛰어나나 공직·직장생활이 어렵다. ' +
      '상관격에 인성이 투출(透出)하면 학자·예술가로 대성할 수 있다. ' +
      '상관격 여명(女命)은 정관을 극하여 남편과의 불화 가능성이 있다.',
  },

  // ── 재성(財星) ─────────────────────────────────────────────────────────

  {
    name:            'PYEON_JAE',
    hanja:           '偏財',
    hangul:          '편재',
    elementRelation: '我克(아극) — 일간이 극하는 오행',
    eumyangRelation: '同極(동극) — 일간과 같은 음양',
    yukChinMale:     '아버지(父)·애인(愛人)·첩(妾)',
    yukChinFemale:   '시아버지(媤父)·아버지(父)',
    symbolism: [
      '유동자금', '재테크', '사업자금', '횡재',
      '투기', '타인의 재물', '넓은 인간관계',
    ],
    career: [
      '사업가·기업인', '투자자·금융업', '무역업',
      '부동산업', '영업직', '엔터테인먼트 관련업',
    ],
    personality: [
      '활발하고 사교적이다', '돈과 사람을 끌어들이는 힘이 있다',
      '변동과 모험을 즐긴다', '넓은 대인관계를 구축한다',
    ],
    positive: [
      '탁월한 사업 수완', '활달하고 사교적인 성격',
      '재물 운영 능력', '대인관계 폭이 넓음',
    ],
    negative: [
      '재물 변동이 심함', '방탕·낭비 경향',
      '여성 관계 복잡(남성 기준)', '투기·도박 손실',
    ],
    bodyPart:    '간(肝)·쓸개·복부',
    conditions:
      '편재가 왕성하고 일간이 강하면 부자의 명(命)이다. ' +
      '비겁(比劫)이 많으면 재물이 분산되어 지키기 어렵다. ' +
      '편재격에 식상(食傷)이 생재(生財)하면 사업 능력이 배가된다.',
    gyeokgukRole:
      '편재격(偏財格)은 사업·투자로 큰돈을 움직이는 재물형 명이다. ' +
      '편재가 용신일 때 겁재(劫財)가 극하면 재물 손실이 따른다. ' +
      '편재와 정관의 조합은 사업과 명예를 동시에 취하는 귀격이다.',
  },

  {
    name:            'JEONG_JAE',
    hanja:           '正財',
    hangul:          '정재',
    elementRelation: '我克(아극) — 일간이 극하는 오행',
    eumyangRelation: '異極(이극) — 일간과 다른 음양',
    yukChinMale:     '처(妻)·정식 배우자',
    yukChinFemale:   '시아버지(媤父)·아버지(父)',
    symbolism: [
      '고정 재산', '봉급·월급', '근면 성실', '안정된 재물',
      '정직한 노력', '절약', '소유욕',
    ],
    career: [
      '회계사·세무사', '은행원·금융직', '공무원',
      '부동산 관리', '안정 지향적 직종', '사무직·관리직',
    ],
    personality: [
      '성실하고 근면하다', '절약 정신이 강하다',
      '안정을 추구한다', '원칙주의적이다',
    ],
    positive: [
      '성실함과 신뢰성', '절약하고 재물을 모으는 능력',
      '안정 지향적이고 책임감 강함', '정직하고 원칙적',
    ],
    negative: [
      '고집스럽고 융통성 부족', '소심하고 보수적',
      '경직된 사고방식', '지나친 소유욕',
    ],
    bodyPart:    '비장(脾臟)·위장·소화기계',
    conditions:
      '정재가 생왕하고 일간이 강하면 성실한 재물 축적이 가능하다. ' +
      '비겁이 정재를 극하면 재물이 분산되고 처와의 불화가 생긴다. ' +
      '정재와 정관이 함께 있으면 근면·명예를 함께 갖춘 귀격(貴格)이다.',
    gyeokgukRole:
      '정재격(正財格)은 근면 성실한 노력으로 재물을 모으는 명이다. ' +
      '정재격에 관성(官星)이 투출하면 재관(財官) 쌍미격(雙美格)으로 귀격이다. ' +
      '정재격의 기신은 겁재와 비견으로, 재물 손실과 배우자 불화를 초래한다.',
  },

  // ── 관성(官星) ─────────────────────────────────────────────────────────

  {
    name:            'PYEON_GWAN',
    hanja:           '偏官',
    hangul:          '편관(칠살)',
    elementRelation: '克我(극아) — 일간을 극하는 오행',
    eumyangRelation: '同極(동극) — 일간과 같은 음양',
    yukChinMale:     '아들(子)·부하직원',
    yukChinFemale:   '남편(夫) — 정식 외 관계·애인',
    symbolism: [
      '칠살(七殺)', '권력욕', '투쟁', '강제성',
      '무관(武官)', '권위', '압박', '극복의 대상',
    ],
    career: [
      '군인·경찰·검사', '무술인·격투기 선수', '외과 의사',
      '소방관·구조대원', '정치인(강경파)', '기업의 CEO(강력한 리더십)',
    ],
    personality: [
      '리더십이 강하다', '결단력이 있다',
      '권위주의적 성향이 있다', '투쟁심과 승부욕이 강하다',
    ],
    positive: [
      '강력한 리더십과 통솔력', '결단력과 추진력',
      '역경을 극복하는 강인함', '군인·무관(武官)적 기질',
    ],
    negative: [
      '타인에 대한 압박과 강압', '폭력성·난폭함',
      '건강 문제(신체 훼손)', '직업·명예의 급격한 기복',
    ],
    bodyPart:    '간(肝)·쓸개·근육·뼈(골격)',
    conditions:
      '편관(칠살)이 많으면 신체적 위험과 관재구설이 따른다. ' +
      '식신제살(食神制殺) — 식신이 편관을 제어하면 귀격이 된다. ' +
      '합살유관(合殺留官) — 합으로 칠살을 제화하면 정관의 기능을 발휘한다. ' +
      '인수화살(印綬化殺) — 인성이 편관의 기운을 설기(洩氣)하면 학문·권위로 승화된다.',
    gyeokgukRole:
      '편관격(칠살격)은 제화(制化)가 핵심이다. ' +
      '식신·인성으로 칠살을 제화하면 군경·법조계·의계의 귀격이 된다. ' +
      '제화 없이 칠살이 강하면 형액(刑厄)·관재·질병이 빈발한다. ' +
      '여명(女命)에서 편관이 강하면 남편과의 관계에 갈등이 많다.',
  },

  {
    name:            'JEONG_GWAN',
    hanja:           '正官',
    hangul:          '정관',
    elementRelation: '克我(극아) — 일간을 극하는 오행',
    eumyangRelation: '異極(이극) — 일간과 다른 음양',
    yukChinMale:     '딸(女兒)·부하직원·조직',
    yukChinFemale:   '남편(夫) — 정식 배우자',
    symbolism: [
      '명예', '직업', '법도', '권위', '규율',
      '공직', '사회적 지위', '책임감',
    ],
    career: [
      '공무원·관료', '판사·검사·변호사', '정치인',
      '대기업 관리직', '교수·교육자', '외교관',
    ],
    personality: [
      '명예와 체면을 중시한다', '준법 정신이 강하다',
      '책임감이 강하고 신중하다', '원칙을 지키려 한다',
    ],
    positive: [
      '명예욕과 높은 도덕성', '강한 책임감',
      '준법 정신과 규율 존중', '사회적 신뢰 획득',
    ],
    negative: [
      '체면 중시로 인한 경직성', '형식적이고 융통성 부족',
      '지나친 눈치와 소극성', '자기 표현 억제',
    ],
    bodyPart:    '신장(腎臟)·방광·뼈·척추',
    conditions:
      '정관이 청순(淸純)하고 일간이 적당히 강하면 최상의 명이다. ' +
      '정관이 상관(傷官)에 의해 극을 당하면 관재·직업 손실이 우려된다. ' +
      '재성(財星)이 정관을 생하면 재관(財官) 쌍미(雙美)의 귀격이다.',
    gyeokgukRole:
      '정관격(正官格)은 십신 중 가장 귀한 격으로 꼽힌다. ' +
      '정관격에 재성·인성이 협조하면 공직·사회적 성공이 확실하다. ' +
      '정관격의 기신은 상관(傷官)이며, 상관이 정관을 극하면 귀(貴)가 깨진다. ' +
      '여명(女命)에서 정관은 남편성(夫星)으로, 정관이 청순하면 좋은 인연이다.',
  },

  // ── 인성(印星) ─────────────────────────────────────────────────────────

  {
    name:            'PYEON_IN',
    hanja:           '偏印',
    hangul:          '편인(도식)',
    elementRelation: '生我(생아) — 일간을 생하는 오행',
    eumyangRelation: '同極(동극) — 일간과 같은 음양',
    yukChinMale:     '이복어머니(異腹母)·계모(繼母)·이모',
    yukChinFemale:   '이복어머니·계모·시어머니',
    symbolism: [
      '도식(倒食)', '이단적 학문', '종교', '철학',
      '고독', '편벽함', '특수 재능', '비밀',
    ],
    career: [
      '종교인·철학자', '연구원·발명가', '역술인·무속인',
      '작가·예술가(독창적)', '의사·심리상담사', '특수기술자',
    ],
    personality: [
      '독창적이고 개성이 강하다', '연구와 탐구를 즐긴다',
      '고독한 면이 있다', '편벽(偏僻)한 생각을 가질 수 있다',
    ],
    positive: [
      '독창적 사고와 창의력', '깊은 연구 능력',
      '철학적이고 통찰력 있음', '특수 재능과 전문성',
    ],
    negative: [
      '식신을 극하여 먹복 약화(도식)', '고독과 외로움',
      '편벽하고 이단적 사고', '타인과의 소통 어려움',
    ],
    bodyPart:    '심장(心臟)·소장·정신(神經)',
    conditions:
      '편인이 식신을 극하면 도식(倒食)이 되어 먹복과 건강이 약해진다. ' +
      '재성(財星)이 편인을 극·제화하면 도식의 피해가 줄어든다. ' +
      '편관(七殺)이 있을 때 편인이 편관을 인화(印化)하면 귀격이 된다.',
    gyeokgukRole:
      '편인격(偏印格)은 독특한 재능으로 특수 분야에서 성공하는 명이다. ' +
      '편인격의 최대 약점은 식신의 억제(도식)이므로, ' +
      '재성(財星)으로 편인을 제어하고 식상(食傷)을 살려야 한다. ' +
      '편관과 편인이 함께 있으면 살인상생(殺印相生)으로 귀격이 된다.',
  },

  {
    name:            'JEONG_IN',
    hanja:           '正印',
    hangul:          '정인(인수)',
    elementRelation: '生我(생아) — 일간을 생하는 오행',
    eumyangRelation: '異極(이극) — 일간과 다른 음양',
    yukChinMale:     '어머니(母)·외삼촌',
    yukChinFemale:   '어머니(母)·외삼촌',
    symbolism: [
      '학문', '자격증', '모성(母性)', '인수(印綬)',
      '보호', '명예', '자격·면허', '지식',
    ],
    career: [
      '교수·교사·강사', '작가·출판업', '의사·약사',
      '법조인', '공무원·학자', '자격증 관련 전문직',
    ],
    personality: [
      '학구적이고 지식욕이 강하다', '인자하고 포용력이 있다',
      '보호 본능이 강하다', '의존적인 면이 있다',
    ],
    positive: [
      '학문적 탁월함', '인자하고 자비로운 성품',
      '강한 보호 본능', '자격증·명예 취득 능력',
    ],
    negative: [
      '의존적이고 나태해질 수 있음', '게으름과 자기 계발 부족',
      '타인에 대한 과잉 보호', '재성(財星) 약화(재성과 충돌)',
    ],
    bodyPart:    '폐(肺)·대장·피부·면역계',
    conditions:
      '정인이 왕성하고 식상(食傷)이 약하면 학문적으로 크게 성공한다. ' +
      '재성이 정인을 극하면 인성의 힘이 약화되어 학업·어머니와의 관계에 문제가 생긴다. ' +
      '정관이 정인을 생하면 관인상생(官印相生)으로 최상의 귀격이다.',
    gyeokgukRole:
      '정인격(正印格)은 학문·자격·명예를 통해 성공하는 귀격이다. ' +
      '관인상생(官印相生) — 정관이 정인을 생하면 공직·학자로서 대성한다. ' +
      '정인격의 기신은 재성(財星)으로, 재성이 인성을 파(破)하면 귀(貴)가 흔들린다. ' +
      '정인이 너무 많으면 신강 과다(過多)가 되어 오히려 일을 방해한다.',
  },
];

// ---------------------------------------------------------------------------
// 십신 그룹 분류
// ---------------------------------------------------------------------------

/**
 * 십신 그룹 분류
 *
 * 십신을 전통적인 다섯 쌍(五對)으로 묶은 분류이다.
 * 각 그룹은 양신(陽神, 편)과 음신(陰神, 정)으로 구성된다.
 *
 * - 비겁(比劫): 나와 같은 오행 — 경쟁·독립
 * - 식상(食傷): 내가 생하는 오행 — 표현·생산
 * - 재성(財星): 내가 극하는 오행 — 재물·여성
 * - 관성(官星): 나를 극하는 오행 — 명예·통제
 * - 인성(印星): 나를 생하는 오행 — 학문·보호
 */
export const SIPSIN_GROUPS: {
  /** 비겁(比劫) — [비견, 겁재] */
  BIGEOB: Sipsin[];
  /** 식상(食傷) — [식신, 상관] */
  SIKSANG: Sipsin[];
  /** 재성(財星) — [편재, 정재] */
  JAE: Sipsin[];
  /** 관성(官星) — [편관, 정관] */
  GWAN: Sipsin[];
  /** 인성(印星) — [편인, 정인] */
  IN: Sipsin[];
} = {
  BIGEOB:  ['BI_GYEON', 'GEOB_JAE'],
  SIKSANG: ['SIK_SHIN', 'SANG_GWAN'],
  JAE:     ['PYEON_JAE', 'JEONG_JAE'],
  GWAN:    ['PYEON_GWAN', 'JEONG_GWAN'],
  IN:      ['PYEON_IN', 'JEONG_IN'],
};

// ---------------------------------------------------------------------------
// 십신 주요 관계 — 생·극·비
// ---------------------------------------------------------------------------

/**
 * 십신 상호 관계 맵
 *
 * 각 십신이 생(生)하거나 극(剋)하는 십신을 정의한다.
 * 편(偏)·정(正) 중 같은 극성(同極)끼리를 기준으로 매핑한다.
 *
 * 오행 생극 순환에 따라:
 *   - 비겁  → 생 → 식상  → 생 → 재성  → 생 → 관성  → 생 → 인성  → 생 → 비겁
 *   - 비겁  → 극 → 재성,  식상 → 극 → 관성,  재성 → 극 → 인성,
 *     관성  → 극 → 비겁,  인성 → 극 → 식상
 *
 * 주의: 편(偏)끼리, 정(正)끼리의 관계를 기재한다.
 */
export const SIPSIN_RELATIONS: Record<Sipsin, {
  /** 내가 생하는 십신 (같은 극성 기준) */
  generates: Sipsin;
  /** 나를 생하는 십신 (같은 극성 기준) */
  isGeneratedBy: Sipsin;
  /** 내가 극하는 십신 (같은 극성 기준) */
  controls: Sipsin;
  /** 나를 극하는 십신 (같은 극성 기준) */
  isControlledBy: Sipsin;
}> = {
  // 비견(양↔양): 비겁은 식상을 생, 재성을 극, 관성에 극당함, 인성에 생받음
  BI_GYEON:   { generates: 'SIK_SHIN',   isGeneratedBy: 'PYEON_IN',   controls: 'PYEON_JAE',  isControlledBy: 'PYEON_GWAN' },
  // 겁재(음↔음): 대응 정신(正神)과 평행 구조
  GEOB_JAE:   { generates: 'SANG_GWAN',  isGeneratedBy: 'JEONG_IN',   controls: 'JEONG_JAE',  isControlledBy: 'JEONG_GWAN' },

  // 식신(양↔양): 식상은 관성을 극, 재성을 생, 인성에 극당함, 비겁에 생받음
  SIK_SHIN:   { generates: 'PYEON_JAE',  isGeneratedBy: 'BI_GYEON',   controls: 'PYEON_GWAN', isControlledBy: 'PYEON_IN'   },
  SANG_GWAN:  { generates: 'JEONG_JAE',  isGeneratedBy: 'GEOB_JAE',   controls: 'JEONG_GWAN', isControlledBy: 'JEONG_IN'   },

  // 편재(양↔양): 재성은 인성을 극, 관성을 생, 비겁에 극당함, 식상에 생받음
  PYEON_JAE:  { generates: 'PYEON_GWAN', isGeneratedBy: 'SIK_SHIN',   controls: 'PYEON_IN',   isControlledBy: 'BI_GYEON'   },
  JEONG_JAE:  { generates: 'JEONG_GWAN', isGeneratedBy: 'SANG_GWAN',  controls: 'JEONG_IN',   isControlledBy: 'GEOB_JAE'   },

  // 편관(양↔양): 관성은 비겁을 극, 인성을 생, 식상에 극당함, 재성에 생받음
  PYEON_GWAN: { generates: 'PYEON_IN',   isGeneratedBy: 'PYEON_JAE',  controls: 'BI_GYEON',   isControlledBy: 'SIK_SHIN'   },
  JEONG_GWAN: { generates: 'JEONG_IN',   isGeneratedBy: 'JEONG_JAE',  controls: 'GEOB_JAE',   isControlledBy: 'SANG_GWAN'  },

  // 편인(양↔양): 인성은 식상을 극, 비겁을 생, 재성에 극당함, 관성에 생받음
  PYEON_IN:   { generates: 'BI_GYEON',   isGeneratedBy: 'PYEON_GWAN', controls: 'SIK_SHIN',   isControlledBy: 'PYEON_JAE'  },
  JEONG_IN:   { generates: 'GEOB_JAE',   isGeneratedBy: 'JEONG_GWAN', controls: 'SANG_GWAN',  isControlledBy: 'JEONG_JAE'  },
};

// ---------------------------------------------------------------------------
// 일간별 십신 배속 테이블
// ---------------------------------------------------------------------------

/**
 * 일간(dayStem) 인덱스와 타간(otherStem) 인덱스로 십신 산출
 *
 * 천간 인덱스 대응 (core/cycle.ts 기준):
 * ```
 *  0=甲(GAP)   1=乙(EUL)   2=丙(BYEONG)  3=丁(JEONG)  4=戊(MU)
 *  5=己(GI)    6=庚(GYEONG) 7=辛(SIN)    8=壬(IM)     9=癸(GYE)
 * ```
 *
 * @param dayStemIdx  - 일간(日干) 인덱스 (0..9)
 * @param otherStemIdx - 대상 천간 인덱스 (0..9)
 * @returns 대상 천간의 십신
 *
 * @example
 * // 甲(0) 일간 기준 丙(2): 목생화 → 식신(동극)
 * sipsinOf(0, 2) // 'SIK_SHIN'
 *
 * @example
 * // 甲(0) 일간 기준 己(5): 목극토, 이극 → 정재
 * sipsinOf(0, 5) // 'JEONG_JAE'
 */
export function sipsinOf(dayStemIdx: number, otherStemIdx: number): Sipsin {
  return tenGodOf(dayStemIdx, otherStemIdx);
}

// ---------------------------------------------------------------------------
// 조회 유틸리티
// ---------------------------------------------------------------------------

/**
 * 십신 식별자로 상세 데이터 조회
 *
 * @param sipsin - 조회할 십신 식별자
 * @returns 해당 십신의 상세 이론 데이터
 * @throws {Error} 알 수 없는 십신 식별자일 경우
 *
 * @example
 * const data = getSipsinData('JEONG_GWAN');
 * console.log(data.hangul); // '정관'
 */
export function getSipsinData(sipsin: Sipsin): SipsinData {
  const found = SIPSIN_TABLE.find(d => d.name === sipsin);
  if (!found) {
    throw new Error(`[sipsin] 알 수 없는 십신 식별자: ${sipsin}`);
  }
  return found;
}

// ---------------------------------------------------------------------------
// 길신·흉신 기본 분류
// ---------------------------------------------------------------------------

/**
 * 기본 길신(吉神) 계열 십신
 *
 * 일반적으로 사주에서 긍정적으로 평가받는 십신 목록.
 * 단, 모든 십신은 사주 구조에 따라 길흉이 달라지므로
 * 이는 일반적 경향을 나타낼 뿐이다.
 *
 * - 정관(正官): 명예·직업의 으뜸 길신
 * - 정인(正印): 학문·보호의 길신
 * - 식신(食神): 먹복·재능의 길신
 * - 정재(正財): 안정적 재물의 길신
 */
export const GIL_SIPSIN: Sipsin[] = [
  'JEONG_GWAN',  // 정관 — 명예·직업 으뜸 길신
  'JEONG_IN',    // 정인 — 학문·보호 길신
  'SIK_SHIN',    // 식신 — 먹복·재능 길신
  'JEONG_JAE',   // 정재 — 안정적 재물 길신
];

/**
 * 기본 흉신(凶神) 계열 십신
 *
 * 일반적으로 사주에서 부정적으로 평가받는 십신 목록.
 * 단, 제화(制化) 여부와 사주 구조에 따라 흉신이
 * 도리어 귀격의 용신이 되는 경우가 많다.
 *
 * - 편관(偏官/칠살): 칠살(七殺), 제화 없이는 형액(刑厄) 초래
 * - 겁재(劫財): 재물 탈취·분산의 흉신
 * - 상관(傷官): 관성 파괴, 구설·관재 초래
 * - 편인(偏印): 도식(倒食), 식복·먹복 약화
 */
export const HYUNG_SIPSIN: Sipsin[] = [
  'PYEON_GWAN',  // 편관(칠살) — 제화 없으면 형액·난관
  'GEOB_JAE',    // 겁재 — 재물 탈취·분산
  'SANG_GWAN',   // 상관 — 관성 파괴·관재구설
  'PYEON_IN',    // 편인(도식) — 식복 약화·고독
];

// ---------------------------------------------------------------------------
// 십신 조합 해설
// ---------------------------------------------------------------------------

/**
 * 십신 주요 조합과 해설
 *
 * 사주에서 특정 십신들이 함께 나타날 때의 의미를 서술한다.
 * 자평진전(子平眞詮)·명리정종(命理正宗)·궁통보감(窮通寶鑑) 기반.
 */
export const SIPSIN_COMBINATIONS: Array<{
  /** 조합을 이루는 십신 목록 */
  combination: Sipsin[];
  /** 조합의 이름 및 의미 */
  meaning: string;
  /** 발현 조건 */
  condition: string;
}> = [
  {
    combination: ['SIK_SHIN', 'PYEON_GWAN'],
    meaning:
      '식신제살(食神制殺) — ' +
      '식신이 편관(칠살)을 제어하여 권력과 재능을 조화롭게 발휘하는 귀격. ' +
      '군인·경찰·의사 등 강직한 직업에서 성공하며 리더십이 탁월하다.',
    condition:
      '식신이 편관보다 강하거나 균형을 이루어야 하며, ' +
      '편인(도식)이 없어야 한다. 편인이 있으면 식신제살이 깨진다.',
  },
  {
    combination: ['JEONG_GWAN', 'JEONG_IN'],
    meaning:
      '관인상생(官印相生) — ' +
      '정관이 정인을 생하는 최상의 귀격. ' +
      '공직·학자·명예직에서 큰 성공을 이루며 사회적 신망이 높다.',
    condition:
      '정관과 정인이 함께 투출(透出)해야 하며, ' +
      '상관(傷官)이 정관을 극하지 않아야 한다.',
  },
  {
    combination: ['SANG_GWAN', 'JEONG_IN'],
    meaning:
      '상관패인(傷官佩印) — ' +
      '상관의 반항적 기질을 인성이 제어·승화시켜 학문·예술로 꽃피우는 구조. ' +
      '총명함과 학문적 성취를 동시에 갖춘다.',
    condition:
      '인성(정인·편인)이 상관을 충분히 제화해야 하며, ' +
      '재성(財星)이 인성을 극하지 않아야 한다.',
  },
  {
    combination: ['SIK_SHIN', 'PYEON_JAE'],
    meaning:
      '식신생재(食神生財) — ' +
      '식신이 재성을 생하여 풍족한 의식주와 사업 성공을 이루는 길격. ' +
      '재물 운과 먹복이 모두 넉넉하다.',
    condition:
      '식신이 왕성하고 재성도 적절히 강해야 한다. ' +
      '편인(도식)이 있으면 식신이 약화되어 효과가 감소한다.',
  },
  {
    combination: ['PYEON_GWAN', 'PYEON_IN'],
    meaning:
      '살인상생(殺印相生) — ' +
      '편관(칠살)이 편인을 생하고, 편인이 일간을 생하는 연쇄 구조. ' +
      '강한 관성의 압박을 인성이 흡수·변환하여 권위와 학문을 겸비한 귀격이 된다.',
    condition:
      '편관과 편인이 함께 투출하고 재성이 편인을 파(破)하지 않아야 한다. ' +
      '일간이 너무 약하면 오히려 부담이 될 수 있다.',
  },
  {
    combination: ['SANG_GWAN', 'PYEON_JAE'],
    meaning:
      '상관생재(傷官生財) — ' +
      '상관의 재능과 표현력이 재성으로 이어져 사업·금융에서 탁월한 수완을 발휘한다. ' +
      '영업·세일즈·엔터테인먼트 분야에서 두각을 나타낸다.',
    condition:
      '상관이 재성을 직접 생해야 하며, ' +
      '관성이 상관을 제어하지 않는 구조가 이상적이다.',
  },
  {
    combination: ['JEONG_JAE', 'JEONG_GWAN'],
    meaning:
      '재관쌍미(財官雙美) — ' +
      '재성과 관성이 함께 있어 재물과 명예를 동시에 갖추는 귀격. ' +
      '성실한 노력으로 사회적 성공과 안정된 생활을 이룬다.',
    condition:
      '재성과 관성이 균형 있게 나타나야 하며, ' +
      '비겁(比劫)이 재성을 지나치게 극하지 않아야 한다.',
  },
  {
    combination: ['PYEON_IN', 'SIK_SHIN'],
    meaning:
      '도식(倒食) — ' +
      '편인이 식신을 극하여 먹복이 줄어들고 재능 발휘가 억제되는 구조. ' +
      '직업 변동, 식생활 문제, 창의력 발휘 어려움이 따른다.',
    condition:
      '편인이 강하고 식신이 약한 경우 도식이 성립한다. ' +
      '재성(財星)이 편인을 제어하면 도식의 흉이 약화된다.',
  },
  {
    combination: ['BI_GYEON', 'GEOB_JAE', 'PYEON_JAE'],
    meaning:
      '군겁쟁재(群劫爭財) — ' +
      '비겁이 지나치게 많아 재성을 여럿이 나눠 갖는 구조. ' +
      '재물이 모이지 않고 동업·공동사업에서 분쟁이 발생한다.',
    condition:
      '비견·겁재가 셋 이상이고 재성이 하나인 경우 군겁쟁재가 성립한다. ' +
      '관성(官星)이 비겁을 제어하면 해소된다.',
  },
  {
    combination: ['SANG_GWAN', 'JEONG_GWAN'],
    meaning:
      '상관견관(傷官見官) — ' +
      '상관이 정관을 직접 극하는 구조로 명예·직업에 손상이 온다. ' +
      '관재구설, 직업 손실, 상사와의 불화가 빈발한다.',
    condition:
      '상관과 정관이 함께 있고 인성의 제화가 없을 때 성립한다. ' +
      '인성(印星)이 상관을 제화하면 상관패인(傷官佩印)으로 흉이 전환된다.',
  },
];
