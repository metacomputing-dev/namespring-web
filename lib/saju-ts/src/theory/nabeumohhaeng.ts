/**
 * nabeumohhaeng.ts — 납음오행 (納音五行)
 *
 * 납음오행이란 60갑자(60 Jiazi) 각 간지(干支) 쌍에 배속된 오행으로,
 * 천간·지지의 조합에서 도출되는 소리(音)의 오행이다.
 *
 * 60갑자 각 쌍(2개 간지)에 동일한 납음오행이 배정되며 총 30쌍.
 *
 * 이론적 근거:
 *   삼명통회(三命通會), 연해자평(淵海子平), 이허중명서(李虛中命書)에서
 *   납음오행의 배속 원리와 활용법을 설명한다.
 *   납음은 천간·지지 각각의 오행(정오행, 正五行)과는 다른 별도의 오행 체계로,
 *   간지 조합이 만들어내는 "소리(音)"를 오행에 배속한 것이다.
 */

import type { StemIdx, BranchIdx } from '../core/cycle.js';
import { ganzhiIndex } from '../core/cycle.js';

// ---------------------------------------------------------------------------
// 1. 납음오행 명칭 열거형
// ---------------------------------------------------------------------------

/**
 * 납음오행 명칭 (한글 로마자 발음 표기).
 *
 * HAE_JUNG_GEUM    — 해중금 (海中金)
 * RO_JUNG_HWA      — 노중화 (爐中火)
 * DAE_RIM_MOK      — 대림목 (大林木)
 * RO_BANG_TO       — 노방토 (路傍土)
 * GEOM_BONG_GEUM   — 검봉금 (劍鋒金)
 * SAN_DU_HWA       — 산두화 (山頭火)
 * GAN_HA_SU        — 간하수 (澗下水)
 * SEONG_DU_TO      — 성두토 (城頭土)
 * BAEK_NAP_GEUM    — 백납금 (白蠟金)
 * YANG_RYU_MOK     — 양류목 (楊柳木)
 * CHEON_JUNG_SU    — 천중수 (泉中水)
 * OK_SANG_TO       — 옥상토 (屋上土)
 * BYEOK_RYEOK_HWA  — 벽력화 (霹靂火)
 * SONG_BAEK_MOK    — 송백목 (松柏木)
 * JANG_RYU_SU      — 장류수 (長流水)
 * SA_JUNG_GEUM     — 사중금 (沙中金)
 * SAN_HA_HWA       — 산하화 (山下火)
 * PYEONG_JI_MOK    — 평지목 (平地木)
 * BYEOK_SANG_TO    — 벽상토 (壁上土)
 * GEUM_BAK_GEUM    — 금박금 (金箔金)
 * BOK_DEUNG_HWA    — 복등화 (覆燈火)
 * CHEON_HA_SU      — 천하수 (天河水)
 * DAE_YEOK_TO      — 대역토 (大驛土)
 * CHA_CHEON_GEUM   — 차천금 (釵釧金)
 * SANG_JA_MOK      — 상자목 (桑柘木)
 * DAE_GYE_SU       — 대계수 (大溪水)
 * SA_JUNG_TO       — 사중토 (沙中土)
 * CHEON_SANG_HWA   — 천상화 (天上火)
 * SEOK_RYU_MOK     — 석류목 (石榴木)
 * DAE_HAE_SU       — 대해수 (大海水)
 */
export type NabeumName =
  | 'HAE_JUNG_GEUM'
  | 'RO_JUNG_HWA'
  | 'DAE_RIM_MOK'
  | 'RO_BANG_TO'
  | 'GEOM_BONG_GEUM'
  | 'SAN_DU_HWA'
  | 'GAN_HA_SU'
  | 'SEONG_DU_TO'
  | 'BAEK_NAP_GEUM'
  | 'YANG_RYU_MOK'
  | 'CHEON_JUNG_SU'
  | 'OK_SANG_TO'
  | 'BYEOK_RYEOK_HWA'
  | 'SONG_BAEK_MOK'
  | 'JANG_RYU_SU'
  | 'SA_JUNG_GEUM'
  | 'SAN_HA_HWA'
  | 'PYEONG_JI_MOK'
  | 'BYEOK_SANG_TO'
  | 'GEUM_BAK_GEUM'
  | 'BOK_DEUNG_HWA'
  | 'CHEON_HA_SU'
  | 'DAE_YEOK_TO'
  | 'CHA_CHEON_GEUM'
  | 'SANG_JA_MOK'
  | 'DAE_GYE_SU'
  | 'SA_JUNG_TO'
  | 'CHEON_SANG_HWA'
  | 'SEOK_RYU_MOK'
  | 'DAE_HAE_SU';

/** 납음오행이 속하는 오행 분류 */
export type NabeumElement = 'GEUM' | 'HWA' | 'MOK' | 'TO' | 'SU';

// ---------------------------------------------------------------------------
// 2. NabeumEntry 인터페이스
// ---------------------------------------------------------------------------

/**
 * 납음오행 항목.
 *
 * 각 항목은 연속된 두 갑자(干支) 쌍에 동일하게 적용된다.
 *
 * 60갑자 인덱스는 core/cycle.ts 의 ganzhiIndex 가 산출하는 값과 동일하다.
 * 甲子=0, 乙丑=1, 丙寅=2, … 癸亥=59.
 */
export interface NabeumEntry {
  /** 납음오행 명칭 */
  name: NabeumName;
  /** 한자 명칭 (주석용) */
  hanja: string;
  /** 한글 명칭 */
  hangul: string;
  /** 오행 분류 (金/火/木/土/水) */
  element: NabeumElement;
  /** 성질 설명 (간략) */
  description: string;
  /** 삼명통회(三命通會) 기반 상세 해석 */
  samMyeongTongHoe: string;
  /**
   * 이 납음이 적용되는 60갑자 인덱스 쌍 [first, second].
   * 60갑자 인덱스: 甲子=0, 乙丑=1, 丙寅=2, … 癸亥=59
   */
  jiziPair: [number, number];
  /** 이 납음이 적용되는 간지 한자 쌍 (가독성용) */
  ganzhiPair: [string, string];
}

// ---------------------------------------------------------------------------
// 3. NABEUM_TABLE — 30쌍 전체
// ---------------------------------------------------------------------------

/**
 * 납음오행 테이블 — 60갑자 전체 30쌍.
 *
 * jiziPair 인덱스 기준 (60갑자 순서):
 *   甲子=0  乙丑=1  丙寅=2  丁卯=3  戊辰=4  己巳=5
 *   庚午=6  辛未=7  壬申=8  癸酉=9  甲戌=10 乙亥=11
 *   丙子=12 丁丑=13 戊寅=14 己卯=15 庚辰=16 辛巳=17
 *   壬午=18 癸未=19 甲申=20 乙酉=21 丙戌=22 丁亥=23
 *   戊子=24 己丑=25 庚寅=26 辛卯=27 壬辰=28 癸巳=29
 *   甲午=30 乙未=31 丙申=32 丁酉=33 戊戌=34 己亥=35
 *   庚子=36 辛丑=37 壬寅=38 癸卯=39 甲辰=40 乙巳=41
 *   丙午=42 丁未=43 戊申=44 己酉=45 庚戌=46 辛亥=47
 *   壬子=48 癸丑=49 甲寅=50 乙卯=51 丙辰=52 丁巳=53
 *   戊午=54 己未=55 庚申=56 辛酉=57 壬戌=58 癸亥=59
 *
 * 삼명통회(三命通會) 상세 해석 포함.
 */
export const NABEUM_TABLE: readonly NabeumEntry[] = [
  // --- 1. 海中金 ---
  {
    name: 'HAE_JUNG_GEUM',
    hanja: '海中金',
    hangul: '해중금',
    element: 'GEUM',
    description: '바다 속 금. 아직 드러나지 않은 잠재된 가치와 깊은 내면의 힘을 상징한다.',
    samMyeongTongHoe:
      '해중금(海中金)은 보물이 바다 속에 잠겨 있는 형상이다. '
      + '금(金)이 수중(水中)에 감추어져 있으니 외부에서는 그 가치를 쉽게 알 수 없다. '
      + '초년에는 빛을 보기 어려우나 때가 되면 물 위로 떠올라 귀하게 쓰인다. '
      + '인내심과 깊은 사색의 힘을 지니며, 타인에게 드러내지 않는 내면의 강인함이 있다. '
      + '물(水)의 도움을 받으면 금이 씻겨져 빛나고, 불(火)이 과하면 녹아내릴 위험이 있다.',
    jiziPair: [0, 1],
    ganzhiPair: ['甲子', '乙丑'],
  },
  // --- 2. 爐中火 ---
  {
    name: 'RO_JUNG_HWA',
    hanja: '爐中火',
    hangul: '노중화',
    element: 'HWA',
    description: '화로 속 불. 단련과 정화의 힘, 강렬하지만 통제된 에너지를 상징한다.',
    samMyeongTongHoe:
      '노중화(爐中火)는 화로(爐) 안에서 타오르는 불이니 용도가 분명하고 쓰임새가 있는 불이다. '
      + '야금(冶金)하여 쇠를 녹이고 그릇을 굽는 실용적 화력을 지닌다. '
      + '나무(木)의 땔감이 있어야 지속되고, 물(水)이 적당하면 불기운을 조절하여 길하나 '
      + '물이 과하면 꺼지니 흉하다. 성격이 활발하고 기술적 재능이 뛰어나며 '
      + '무언가를 단련하고 완성하는 데 탁월한 능력을 보인다.',
    jiziPair: [2, 3],
    ganzhiPair: ['丙寅', '丁卯'],
  },
  // --- 3. 大林木 ---
  {
    name: 'DAE_RIM_MOK',
    hanja: '大林木',
    hangul: '대림목',
    element: 'MOK',
    description: '큰 숲의 나무. 웅장한 기상과 포용력, 성장의 힘을 상징한다.',
    samMyeongTongHoe:
      '대림목(大林木)은 울창한 큰 숲의 나무이니 기세가 웅장하고 뿌리가 깊다. '
      + '바람과 비를 맞아도 쓰러지지 않는 강인한 생명력을 지닌다. '
      + '물(水)이 있으면 뿌리가 윤택해지고, 흙(土)이 받쳐주면 안정된다. '
      + '불(火)이 적당하면 따뜻한 양지의 나무가 되나, 과하면 산불로 소멸한다. '
      + '쇠(金)의 도끼가 다듬어주면 재목(材木)으로서 큰 쓰임을 얻는다. '
      + '넓은 포용력과 리더십을 지니며 많은 사람을 품는 덕이 있다.',
    jiziPair: [4, 5],
    ganzhiPair: ['戊辰', '己巳'],
  },
  // --- 4. 路傍土 ---
  {
    name: 'RO_BANG_TO',
    hanja: '路傍土',
    hangul: '노방토',
    element: 'TO',
    description: '길가의 흙. 평범함 속의 실용성, 묵묵한 봉사를 상징한다.',
    samMyeongTongHoe:
      '노방토(路傍土)는 길가에 있는 흙이니 사람이 밟고 지나가는 땅이다. '
      + '귀하게 쓰이기는 어려우나 없으면 안 되는 존재로, 실용성과 겸손함을 뜻한다. '
      + '나무(木)가 심어지면 비로소 가치가 드러나고, 물(水)이 적당하면 기름진 땅이 된다. '
      + '불(火)이 과하면 흙이 마르고 갈라지니 흉하다. '
      + '성격이 근면하고 봉사 정신이 강하며, 화려함보다 실속을 중시한다.',
    jiziPair: [6, 7],
    ganzhiPair: ['庚午', '辛未'],
  },
  // --- 5. 劍鋒金 ---
  {
    name: 'GEOM_BONG_GEUM',
    hanja: '劍鋒金',
    hangul: '검봉금',
    element: 'GEUM',
    description: '칼날의 금. 날카로운 판단력과 결단력, 정의감을 상징한다.',
    samMyeongTongHoe:
      '검봉금(劍鋒金)은 이미 벼려진 칼날의 금속이니 30납음 중 가장 강한 금(金)이다. '
      + '날카롭고 예리하여 결단력이 뛰어나고 불의를 참지 못하는 정의감이 있다. '
      + '불(火)로 이미 단련되었으니 다시 불을 만나면 녹아내릴 위험이 있다. '
      + '나무(木)를 만나면 재목을 깎아 쓸모를 다하고, 물(水)로 씻으면 더욱 빛난다. '
      + '성격이 강직하고 군인·검사·외과의사 등 결단이 필요한 분야에 적합하다.',
    jiziPair: [8, 9],
    ganzhiPair: ['壬申', '癸酉'],
  },
  // --- 6. 山頭火 ---
  {
    name: 'SAN_DU_HWA',
    hanja: '山頭火',
    hangul: '산두화',
    element: 'HWA',
    description: '산꼭대기의 불. 밝은 지도력과 높은 이상, 선구적 기질을 상징한다.',
    samMyeongTongHoe:
      '산두화(山頭火)는 산봉우리에서 타오르는 불이니 멀리서도 보이는 봉화(烽火)와 같다. '
      + '높은 곳에서 빛을 발하니 지도력과 명예를 상징하나, 바람에 쉽게 꺼질 수 있다. '
      + '나무(木)의 땔감이 있어야 지속되고, 흙(土)의 산이 받쳐야 안정된다. '
      + '물(水)이 과하면 산사태와 함께 불이 꺼지니 크게 흉하다. '
      + '이상이 높고 선구자적 기질이 있으나, 현실 기반이 약하면 뜻을 이루기 어렵다.',
    jiziPair: [10, 11],
    ganzhiPair: ['甲戌', '乙亥'],
  },
  // --- 7. 澗下水 ---
  {
    name: 'GAN_HA_SU',
    hanja: '澗下水',
    hangul: '간하수',
    element: 'SU',
    description: '계곡 아래 물. 조용하고 깊은 지혜, 차분한 흐름을 상징한다.',
    samMyeongTongHoe:
      '간하수(澗下水)는 산골짜기 아래로 졸졸 흐르는 맑은 물이니 조용하고 깨끗하다. '
      + '수량이 적어 큰 힘을 발휘하기 어려우나 맑고 순수한 성질이 있다. '
      + '나무(木)를 만나면 초목을 적셔 생명을 키우고, 쇠(金)에서 솟아나면 원천이 풍부해진다. '
      + '흙(土)이 막으면 물길이 끊기니 흉하고, 큰 물(大海水 등)을 만나면 합류하여 힘을 얻는다. '
      + '성격이 차분하고 학문적 깊이가 있으며, 은둔하여 실력을 쌓는 유형이다.',
    jiziPair: [12, 13],
    ganzhiPair: ['丙子', '丁丑'],
  },
  // --- 8. 城頭土 ---
  {
    name: 'SEONG_DU_TO',
    hanja: '城頭土',
    hangul: '성두토',
    element: 'TO',
    description: '성벽 위의 흙. 방어적 기질과 안정 추구, 보수적 가치관을 상징한다.',
    samMyeongTongHoe:
      '성두토(城頭土)는 성벽(城壁) 위에 쌓인 흙이니 방어와 보호의 역할을 한다. '
      + '이미 높은 곳에 올라 있으니 위엄과 권위가 있으나, 뿌리가 얕아 무너지기 쉽다. '
      + '나무(木)가 성벽 위에 자라면 오히려 성을 허무니 주의해야 하고, '
      + '물(水)이 적당하면 흙이 단단해지나 과하면 성이 무너진다. '
      + '불(火)로 구우면 벽돌이 되어 더욱 견고해지니 길하다. '
      + '보수적이고 안정을 추구하며, 조직을 지키고 관리하는 능력이 뛰어나다.',
    jiziPair: [14, 15],
    ganzhiPair: ['戊寅', '己卯'],
  },
  // --- 9. 白蠟金 ---
  {
    name: 'BAEK_NAP_GEUM',
    hanja: '白蠟金',
    hangul: '백납금',
    element: 'GEUM',
    description: '흰 납(白蠟)의 금. 유연하고 적응력 강한 실용적 자질을 상징한다.',
    samMyeongTongHoe:
      '백납금(白蠟金)은 기물로 가공되기 전의 연한 금속이니 유연하고 부드럽다. '
      + '아직 단련되지 않아 강인함은 부족하나 적응력과 변화 능력이 뛰어나다. '
      + '불(火)로 단련하면 비로소 쓸모 있는 그릇이 되니 적절한 시련이 필요하다. '
      + '나무(木)를 만나면 깎아 다듬을 수 있고, 물(水)로 씻으면 광택이 난다. '
      + '흙(土)이 과하면 금이 묻혀 드러나지 못하니 주의해야 한다. '
      + '성격이 온순하고 사교적이며, 다양한 환경에 잘 적응하는 융통성이 있다.',
    jiziPair: [16, 17],
    ganzhiPair: ['庚辰', '辛巳'],
  },
  // --- 10. 楊柳木 ---
  {
    name: 'YANG_RYU_MOK',
    hanja: '楊柳木',
    hangul: '양류목',
    element: 'MOK',
    description: '버드나무. 유연함과 감수성, 예술적 기질을 상징한다.',
    samMyeongTongHoe:
      '양류목(楊柳木)은 물가의 버드나무이니 가지가 부드럽게 늘어져 바람에 흔들린다. '
      + '물(水)이 가까이 있어야 뿌리가 윤택하고 생장하며, 물이 없으면 시들어 버린다. '
      + '불(火)을 만나면 쉽게 타니 흉하고, 쇠(金)의 가위로 다듬어야 단정해진다. '
      + '흙(土)이 적당하면 뿌리를 내리나, 과한 흙은 뿌리를 질식시킨다. '
      + '성격이 감성적이고 예술적 재능이 풍부하며, 타인에게 부드러운 인상을 준다. '
      + '다만 의지력이 약하여 쉽게 흔들리는 면이 있다.',
    jiziPair: [18, 19],
    ganzhiPair: ['壬午', '癸未'],
  },
  // --- 11. 泉中水 ---
  {
    name: 'CHEON_JUNG_SU',
    hanja: '泉中水',
    hangul: '천중수',
    element: 'SU',
    description: '샘물. 끊임없이 솟아오르는 지혜와 생명력을 상징한다.',
    samMyeongTongHoe:
      '천중수(泉中水)는 땅속에서 솟아오르는 샘물이니 맑고 깨끗하며 끊이지 않는다. '
      + '스스로 솟아나니 원천(源泉)이 풍부하고 지속적인 생명력이 있다. '
      + '쇠(金)에서 금생수(金生水)로 원천이 보강되면 더욱 풍부해지고, '
      + '나무(木)를 만나면 초목에 생기를 주니 길하다. '
      + '흙(土)이 막으면 물길이 막혀 흉하고, 불(火)이 과하면 증발하여 메마른다. '
      + '학문적 탐구심과 지적 호기심이 왕성하며, 조용히 실력을 쌓아가는 유형이다.',
    jiziPair: [20, 21],
    ganzhiPair: ['甲申', '乙酉'],
  },
  // --- 12. 屋上土 ---
  {
    name: 'OK_SANG_TO',
    hanja: '屋上土',
    hangul: '옥상토',
    element: 'TO',
    description: '지붕 위의 흙. 이미 완성된 구조물 위의 장식적 흙으로 체면과 격식을 상징한다.',
    samMyeongTongHoe:
      '옥상토(屋上土)는 지붕 위에 올려진 흙이니 이미 높은 곳에 있어 위엄이 있다. '
      + '그러나 실속이 없고 겉모습만 화려할 수 있으니 내실을 다져야 한다. '
      + '나무(木)의 기둥이 받쳐야 지붕이 서고, 쇠(金)의 못이 고정해야 무너지지 않는다. '
      + '물(水)이 많으면 지붕이 무너지니 크게 흉하고, 불(火)이 적당하면 따뜻한 집이 된다. '
      + '체면을 중시하고 격식을 차리며, 사회적 지위와 명예를 추구하는 경향이 있다.',
    jiziPair: [22, 23],
    ganzhiPair: ['丙戌', '丁亥'],
  },
  // --- 13. 霹靂火 ---
  {
    name: 'BYEOK_RYEOK_HWA',
    hanja: '霹靂火',
    hangul: '벽력화',
    element: 'HWA',
    description: '번개불. 순간적이고 강렬한 에너지, 뛰어난 직관력을 상징한다.',
    samMyeongTongHoe:
      '벽력화(霹靂火)는 하늘에서 내려치는 번개의 불이니 순간적이고 강렬하다. '
      + '천둥과 번개는 만물을 놀라게 하나 그 힘은 오래 지속되지 않는다. '
      + '나무(木)를 만나면 벼락이 나무를 쪼개니 파괴적이나, '
      + '물(水)과 함께하면 비가 되어 만물을 적시니 길하다. '
      + '흙(土)이 있으면 뇌전(雷電)이 땅으로 스며들어 안정되고, '
      + '쇠(金)를 만나면 번개가 쇠를 두드려 새로운 것을 만들어낸다. '
      + '순발력과 직관력이 뛰어나고 혁신적이나, 인내심이 부족할 수 있다.',
    jiziPair: [24, 25],
    ganzhiPair: ['戊子', '己丑'],
  },
  // --- 14. 松柏木 ---
  {
    name: 'SONG_BAEK_MOK',
    hanja: '松柏木',
    hangul: '송백목',
    element: 'MOK',
    description: '소나무·잣나무. 절개와 지조, 사시사철 변하지 않는 강인한 생명력을 상징한다.',
    samMyeongTongHoe:
      '송백목(松柏木)은 소나무와 잣나무이니 사시사철 푸르러 절개와 지조를 상징한다. '
      + '추위와 눈보라에도 굴하지 않는 강인한 생명력이 있다. '
      + '물(水)이 적당하면 더욱 푸르러지고, 흙(土)이 비옥하면 뿌리가 깊어진다. '
      + '불(火)을 만나면 송진(松脂)에 불이 붙어 크게 타니 주의해야 하고, '
      + '쇠(金)의 도끼를 맞으면 재목으로 쓰여 동량지재(棟梁之材)가 된다. '
      + '원칙을 중시하고 변하지 않는 신념이 있으며, 학자·공직자에 적합한 기질이다.',
    jiziPair: [26, 27],
    ganzhiPair: ['庚寅', '辛卯'],
  },
  // --- 15. 長流水 ---
  {
    name: 'JANG_RYU_SU',
    hanja: '長流水',
    hangul: '장류수',
    element: 'SU',
    description: '길게 흐르는 물. 인내와 지속성, 넓은 포용력을 상징한다.',
    samMyeongTongHoe:
      '장류수(長流水)는 강물이 끊이지 않고 길게 흐르는 것이니 인내와 지속력을 뜻한다. '
      + '작은 시내에서 시작하여 큰 강이 되듯 점차 세력을 키워나간다. '
      + '쇠(金)에서 금생수(金生水)의 원천을 얻으면 수량이 풍부해지고, '
      + '나무(木)를 만나면 수생목(水生木)으로 초목을 기르니 길하다. '
      + '흙(土)이 둑을 쌓아 막으면 범람하여 흉하고, 불(火)이 적당하면 안개가 피어 아름답다. '
      + '끈기와 인내가 강하며 대기만성(大器晩成)의 기질이 있다.',
    jiziPair: [28, 29],
    ganzhiPair: ['壬辰', '癸巳'],
  },
  // --- 16. 沙中金 ---
  {
    name: 'SA_JUNG_GEUM',
    hanja: '沙中金',
    hangul: '사중금',
    element: 'GEUM',
    description: '모래 속 금. 숨겨진 잠재력과 끈기 있는 노력을 상징한다.',
    samMyeongTongHoe:
      '사중금(沙中金)은 모래와 광석 속에 묻혀 있는 금이니 발견되기 전에는 가치를 모른다. '
      + '사금(砂金)을 걸러내듯 끈기 있는 노력으로 재능을 발굴해야 한다. '
      + '불(火)로 제련하면 순금(純金)이 되니 시련을 거치면 크게 성장하고, '
      + '물(水)로 씻어내면 모래가 벗겨져 금이 드러난다. '
      + '흙(土)이 과하면 더 깊이 묻혀 빛을 보지 못하니 주의해야 한다. '
      + '나무(木)와 함께하면 금이 나무를 다듬어 기물을 만들 수 있다. '
      + '겉으로 드러나지 않는 실력파로, 인정받기까지 시간이 걸리지만 결국 빛을 발한다.',
    jiziPair: [30, 31],
    ganzhiPair: ['甲午', '乙未'],
  },
  // --- 17. 山下火 ---
  {
    name: 'SAN_HA_HWA',
    hanja: '山下火',
    hangul: '산하화',
    element: 'HWA',
    description: '산 아래 불. 내면에 감춰진 열정과 저력을 상징한다.',
    samMyeongTongHoe:
      '산하화(山下火)는 산 아래에서 타오르는 불이니 햇빛이 산 아래를 비추는 형상이다. '
      + '석양(夕陽)이나 초원의 불처럼 은은하지만 따뜻한 기운이 있다. '
      + '나무(木)가 있으면 불이 지속되고, 흙(土)의 산이 바람을 막아주면 안정된다. '
      + '물(水)이 과하면 불이 꺼지니 흉하나, 적당한 물은 불기운을 조절한다. '
      + '쇠(金)를 만나면 화극금(火剋金)으로 금속을 녹여 기물을 만드니 실용적이다. '
      + '내면에 열정을 감추고 있으며 차분하게 일을 추진하는 유형이다.',
    jiziPair: [32, 33],
    ganzhiPair: ['丙申', '丁酉'],
  },
  // --- 18. 平地木 ---
  {
    name: 'PYEONG_JI_MOK',
    hanja: '平地木',
    hangul: '평지목',
    element: 'MOK',
    description: '평지의 나무. 안정적이고 온화한 성장, 협력적 기질을 상징한다.',
    samMyeongTongHoe:
      '평지목(平地木)은 들판에 홀로 서 있는 나무이니 어디서든 잘 자라는 적응력이 있다. '
      + '높은 산의 나무처럼 웅장하지는 않으나 누구에게나 그늘을 제공하는 덕이 있다. '
      + '물(水)이 있으면 성장하고, 흙(土)이 비옥하면 열매를 맺는다. '
      + '불(火)이 적당하면 따뜻한 양지의 나무가 되나, 과하면 들불에 타버린다. '
      + '쇠(金)로 다듬으면 유용한 재목이 되니 훈련과 교육이 중요하다. '
      + '성격이 온화하고 대인관계가 원만하며, 안정적인 환경에서 능력을 발휘한다.',
    jiziPair: [34, 35],
    ganzhiPair: ['戊戌', '己亥'],
  },
  // --- 19. 壁上土 ---
  {
    name: 'BYEOK_SANG_TO',
    hanja: '壁上土',
    hangul: '벽상토',
    element: 'TO',
    description: '벽 위의 흙. 섬세한 미적 감각과 표현력을 상징한다.',
    samMyeongTongHoe:
      '벽상토(壁上土)는 벽에 바른 회벽(灰壁)의 흙이니 장식적이고 섬세하다. '
      + '건물의 내외벽을 단장하는 흙으로 미적 감각과 마무리 능력을 상징한다. '
      + '나무(木)의 뼈대가 있어야 벽이 서고, 물(水)로 반죽해야 흙이 잘 붙는다. '
      + '불(火)에 구우면 단단한 타일이 되어 길하나, 과한 불은 균열을 만든다. '
      + '쇠(金)의 연장으로 다듬으면 정교한 장식이 된다. '
      + '예술적 감각이 뛰어나고 세밀한 작업에 능하며, 환경을 아름답게 꾸미는 재능이 있다.',
    jiziPair: [36, 37],
    ganzhiPair: ['庚子', '辛丑'],
  },
  // --- 20. 金箔金 ---
  {
    name: 'GEUM_BAK_GEUM',
    hanja: '金箔金',
    hangul: '금박금',
    element: 'GEUM',
    description: '금박. 화려하고 세련된 외양, 뛰어난 심미안을 상징한다.',
    samMyeongTongHoe:
      '금박금(金箔金)은 극히 얇게 펴진 금박(金箔)이니 화려하나 실질적 무게는 가볍다. '
      + '30납음 중 가장 약한 금(金)으로 겉은 화려하나 내실이 부족할 수 있다. '
      + '불(火)을 만나면 쉽게 녹아 사라지니 크게 흉하고, '
      + '나무(木) 위에 붙어야 비로소 빛을 발한다(금박은 나무에 입힌다). '
      + '물(水)이 적당하면 광택이 나고, 흙(土)에 묻히면 드러나지 못한다. '
      + '외모나 표현력이 뛰어나 예술·패션·디자인 분야에 적합한 기질이다.',
    jiziPair: [38, 39],
    ganzhiPair: ['壬寅', '癸卯'],
  },
  // --- 21. 覆燈火 ---
  {
    name: 'BOK_DEUNG_HWA',
    hanja: '覆燈火',
    hangul: '복등화',
    element: 'HWA',
    description: '엎어진 등불. 역경 속에서도 꺼지지 않는 의지, 보호받는 내면의 빛을 상징한다.',
    samMyeongTongHoe:
      '복등화(覆燈火)는 덮개로 보호된 등불이니 바람이 불어도 쉽게 꺼지지 않는다. '
      + '작지만 확실한 빛으로 어둠을 밝히는 역할을 하며, 내면의 강인한 의지를 뜻한다. '
      + '나무(木)의 기름이 있어야 오래 타고, 쇠(金)의 등잔이 받쳐야 안정된다. '
      + '물(水)이 과하면 불이 꺼지니 흉하나, 적당한 물은 기름을 보충해준다. '
      + '흙(土)이 덮개 역할을 하면 바람을 막아주어 길하다. '
      + '역경에 강하고 묵묵히 자신의 길을 밝혀나가며, 주변을 조용히 이끄는 힘이 있다.',
    jiziPair: [40, 41],
    ganzhiPair: ['甲辰', '乙巳'],
  },
  // --- 22. 天河水 ---
  {
    name: 'CHEON_HA_SU',
    hanja: '天河水',
    hangul: '천하수',
    element: 'SU',
    description: '은하수. 광대한 이상과 꿈, 초월적 사고를 상징한다.',
    samMyeongTongHoe:
      '천하수(天河水)는 하늘의 은하수(銀河水)이니 30납음 중 가장 높은 곳의 물이다. '
      + '범인(凡人)이 쉽게 닿을 수 없는 높은 이상과 초월적 경지를 상징한다. '
      + '하늘에서 비가 되어 내리면 만물을 적시니 큰 은혜를 베푸는 격이다. '
      + '불(火)을 만나면 하늘의 물이 불을 끄니 화극수(火剋水)가 아니라 오히려 수극화가 된다. '
      + '흙(土)이 막을 수 없는 물이니 토극수(土剋水)가 통하지 않는다. '
      + '이상주의적이고 철학적 사고가 깊으며, 종교·학문·예술에서 높은 경지에 오를 수 있다.',
    jiziPair: [42, 43],
    ganzhiPair: ['丙午', '丁未'],
  },
  // --- 23. 大驛土 ---
  {
    name: 'DAE_YEOK_TO',
    hanja: '大驛土',
    hangul: '대역토',
    element: 'TO',
    description: '큰 역참의 흙. 분주한 활동성과 중개 및 소통 능력을 상징한다.',
    samMyeongTongHoe:
      '대역토(大驛土)는 큰 역참(驛站)의 넓은 대지이니 사람과 물자가 오가는 교통의 요지이다. '
      + '넓고 평탄한 땅으로 많은 것을 받아들이는 포용력이 있다. '
      + '나무(木)가 심어지면 역참 주변의 가로수가 되어 아름답고, '
      + '물(水)이 적당하면 풍요로운 땅이 되나 과하면 진흙이 되어 통행이 어렵다. '
      + '불(火)이 적당하면 건조하여 길을 다니기 좋고, 쇠(金)가 있으면 도로가 단단해진다. '
      + '사교적이고 중개·유통·소통에 능하며, 다양한 사람과 어울리는 능력이 뛰어나다.',
    jiziPair: [44, 45],
    ganzhiPair: ['戊申', '己酉'],
  },
  // --- 24. 釵釧金 ---
  {
    name: 'CHA_CHEON_GEUM',
    hanja: '釵釧金',
    hangul: '차천금',
    element: 'GEUM',
    description: '비녀와 팔찌의 금. 장식적 가치와 우아한 품격을 상징한다.',
    samMyeongTongHoe:
      '차천금(釵釧金)은 비녀(釵)와 팔찌(釧)로 만들어진 장신구의 금이니 '
      + '이미 가공이 끝나 아름다운 형태를 갖추고 있다. '
      + '검봉금(劍鋒金)처럼 날카롭지 않고 해중금(海中金)처럼 묻혀 있지도 않다. '
      + '불(火)을 다시 만나면 녹아 형태를 잃으니 흉하고, '
      + '물(水)로 닦으면 광택이 나서 더욱 아름답다. '
      + '나무(木)와 함께하면 치장의 효과가 있고, 흙(土)에 묻히면 가치를 잃는다. '
      + '우아하고 품위 있는 성격으로 미적 감각이 뛰어나며, 사치스러운 면이 있을 수 있다.',
    jiziPair: [46, 47],
    ganzhiPair: ['庚戌', '辛亥'],
  },
  // --- 25. 桑柘木 ---
  {
    name: 'SANG_JA_MOK',
    hanja: '桑柘木',
    hangul: '상자목',
    element: 'MOK',
    description: '뽕나무·산뽕나무. 실용적 가치와 근면한 생산성을 상징한다.',
    samMyeongTongHoe:
      '상자목(桑柘木)은 뽕나무(桑)와 산뽕나무(柘)이니 누에를 기르는 실용적인 나무이다. '
      + '비단(絹)의 원료인 뽕잎을 생산하여 경제적 가치가 높다. '
      + '물(水)이 적당하면 잘 자라고, 흙(土)이 비옥하면 풍성한 수확을 얻는다. '
      + '불(火)을 만나면 타버리니 흉하고, 쇠(金)로 가지를 쳐야 새 가지가 돋는다. '
      + '실용적이고 근면하며 생산적인 성격으로, '
      + '사업·농업·제조업 등 실물 경제 분야에서 능력을 발휘한다.',
    jiziPair: [48, 49],
    ganzhiPair: ['壬子', '癸丑'],
  },
  // --- 26. 大溪水 ---
  {
    name: 'DAE_GYE_SU',
    hanja: '大溪水',
    hangul: '대계수',
    element: 'SU',
    description: '큰 계곡물. 도전적인 흐름과 역동적 추진력을 상징한다.',
    samMyeongTongHoe:
      '대계수(大溪水)는 큰 계곡에서 쏟아져 내리는 물이니 힘차고 역동적이다. '
      + '바위를 깎고 골짜기를 파며 앞으로 나아가는 추진력이 있다. '
      + '쇠(金)의 바위 사이에서 솟아나면 금생수로 원천이 풍부해지고, '
      + '나무(木)를 만나면 계곡의 숲을 이루어 아름답다. '
      + '흙(土)이 둑을 쌓으면 물길이 막혀 범람하니 주의해야 하고, '
      + '불(火)이 적당하면 안개가 피어올라 신비로운 경치를 이룬다. '
      + '도전정신이 강하고 추진력이 있으며, 장애물을 돌파하는 힘이 있다.',
    jiziPair: [50, 51],
    ganzhiPair: ['甲寅', '乙卯'],
  },
  // --- 27. 沙中土 ---
  {
    name: 'SA_JUNG_TO',
    hanja: '沙中土',
    hangul: '사중토',
    element: 'TO',
    description: '모래 속 흙. 유연하고 적응력 있는 현실적 자질을 상징한다.',
    samMyeongTongHoe:
      '사중토(沙中土)는 모래 속에 섞여 있는 흙이니 가볍고 유동적이다. '
      + '바람에 쉽게 날리고 물에 쉽게 씻겨 나가니 안정감은 부족하다. '
      + '물(水)이 적당하면 모래가 뭉쳐져 단단해지고, '
      + '나무(木)의 뿌리가 잡으면 비로소 안정된 땅이 된다. '
      + '불(火)에 구우면 유리(琉璃)나 도자기가 되어 귀하게 쓰이니 길하다. '
      + '쇠(金)가 모래 속에 있으면 사금(沙金)이 되어 함께 가치가 올라간다. '
      + '적응력이 뛰어나고 환경 변화에 유연하나, 주관이 약할 수 있다.',
    jiziPair: [52, 53],
    ganzhiPair: ['丙辰', '丁巳'],
  },
  // --- 28. 天上火 ---
  {
    name: 'CHEON_SANG_HWA',
    hanja: '天上火',
    hangul: '천상화',
    element: 'HWA',
    description: '하늘 위의 불(태양). 높은 이상과 강렬한 존재감, 지도자적 자질을 상징한다.',
    samMyeongTongHoe:
      '천상화(天上火)는 하늘 위에 빛나는 태양(太陽)의 불이니 30납음 중 가장 강한 화(火)이다. '
      + '만물을 비추고 생명을 기르는 위대한 힘을 지녔으나, 가까이하면 뜨겁다. '
      + '물(水)이 적당하면 비와 햇빛이 조화되어 무지개를 이루니 대길하고, '
      + '나무(木)가 있으면 숲을 비추어 만물이 무성하다. '
      + '흙(土)이 있으면 대지를 따뜻하게 하니 길하고, '
      + '쇠(金)를 만나면 녹여서 기물을 만드니 생산적이다. '
      + '리더십이 강하고 존재감이 뛰어나며, 큰 뜻을 품고 세상을 이끄는 기질이 있다.',
    jiziPair: [54, 55],
    ganzhiPair: ['戊午', '己未'],
  },
  // --- 29. 石榴木 ---
  {
    name: 'SEOK_RYU_MOK',
    hanja: '石榴木',
    hangul: '석류목',
    element: 'MOK',
    description: '석류나무. 풍요와 다산, 화려한 결실을 상징한다.',
    samMyeongTongHoe:
      '석류목(石榴木)은 석류나무이니 가을에 붉은 열매가 알알이 맺히는 풍요의 나무이다. '
      + '꽃도 화려하고 열매도 풍성하여 다산(多産)과 번영을 상징한다. '
      + '물(水)이 적당하면 잘 자라고, 흙(土)이 비옥하면 열매가 충실하다. '
      + '불(火)에 가까우면 꽃은 화려하나 열매가 익기 전에 시들 수 있고, '
      + '쇠(金)로 가지를 쳐야 열매에 영양이 집중된다. '
      + '성과가 화려하고 다재다능하며, 자녀 복과 재물 복이 있는 기질이다. '
      + '다만 결실이 지나치면 가지가 처지듯 과욕을 경계해야 한다.',
    jiziPair: [56, 57],
    ganzhiPair: ['庚申', '辛酉'],
  },
  // --- 30. 大海水 ---
  {
    name: 'DAE_HAE_SU',
    hanja: '大海水',
    hangul: '대해수',
    element: 'SU',
    description: '큰 바다물. 무한한 포용력과 깊은 통찰, 끝없는 가능성을 상징한다.',
    samMyeongTongHoe:
      '대해수(大海水)는 끝없이 넓은 바다의 물이니 30납음 중 가장 큰 물(水)이다. '
      + '모든 강과 시내가 흘러들어오니 무한한 포용력과 깊이를 지닌다. '
      + '쇠(金)가 바다에 빠지면 가라앉고, 흙(土)이 막을 수 없을 만큼 광대하다. '
      + '나무(木)를 만나면 바다 위에 떠다니는 배가 되어 항해의 뜻이 있고, '
      + '불(火)과 만나면 수증기가 되어 구름을 이루니 변화무쌍하다. '
      + '작은 물(間下水, 泉中水 등)과 합하면 더욱 넓어진다. '
      + '도량이 크고 세상만사를 포용하는 대인(大人)의 기질이 있으나, '
      + '때로는 깊어서 알 수 없는 비밀스러운 면도 있다.',
    jiziPair: [58, 59],
    ganzhiPair: ['壬戌', '癸亥'],
  },
] as const;

// ---------------------------------------------------------------------------
// 4. getJiziIndex / getNabeum — 간지 인덱스로 납음오행 반환
// ---------------------------------------------------------------------------

/**
 * 60갑자 인덱스를 계산한다.
 *
 * 60갑자는 (stemIdx + branchIdx) % 2 === 0 인 조합만 유효하다.
 * 순서: 甲子(0) -> 乙丑(1) -> 丙寅(2) -> ... -> 癸亥(59)
 *
 * 수학적 원리:
 *   i ≡ stemIdx  (mod 10)
 *   i ≡ branchIdx (mod 12)
 *   gcd(10, 12) = 2 이므로 stemIdx ≡ branchIdx (mod 2) 일 때만 해가 존재한다.
 *   중국 나머지 정리(CRT)에 의해 유일한 해 i (mod 60)가 결정된다.
 *
 * core/cycle.ts 의 ganzhiIndex 와 동일한 결과를 반환하되,
 * 유효하지 않은 조합에 대해 -1 을 반환하는 편의 래퍼이다.
 *
 * @param stemIdx   - 천간 인덱스 (甲=0 ... 癸=9)
 * @param branchIdx - 지지 인덱스 (子=0 ... 亥=11)
 * @returns 60갑자 인덱스 (0~59), 유효하지 않은 조합이면 -1
 */
export function getJiziIndex(stemIdx: StemIdx, branchIdx: BranchIdx): number {
  const result = ganzhiIndex({ stem: stemIdx, branch: branchIdx });
  return result ?? -1;
}

/**
 * 60갑자 인덱스로부터 납음오행 항목을 직접 반환한다.
 *
 * NABEUM_TABLE 의 30 항목을 선형 탐색하는 대신,
 * 60갑자 인덱스를 2로 나눈 몫으로 O(1) 직접 접근한다.
 *
 * @param jiziIdx - 60갑자 인덱스 (0~59)
 * @returns NabeumEntry, 또는 범위 밖이면 undefined
 */
export function getNabeumByJiziIndex(jiziIdx: number): NabeumEntry | undefined {
  if (jiziIdx < 0 || jiziIdx > 59) return undefined;
  return NABEUM_TABLE[Math.floor(jiziIdx / 2)];
}

/**
 * 천간·지지 인덱스로 납음오행 항목을 반환한다.
 *
 * @param stemIdx   - 천간 인덱스 (甲=0 ... 癸=9)
 * @param branchIdx - 지지 인덱스 (子=0 ... 亥=11)
 * @returns NabeumEntry, 또는 유효하지 않은 조합이면 undefined
 */
export function getNabeum(
  stemIdx: StemIdx,
  branchIdx: BranchIdx,
): NabeumEntry | undefined {
  const jizi = getJiziIndex(stemIdx, branchIdx);
  if (jizi < 0) return undefined;
  return getNabeumByJiziIndex(jizi);
}

// ---------------------------------------------------------------------------
// 5. 납음오행 오행별 성질 테이블
// ---------------------------------------------------------------------------

/**
 * 납음오행 오행별 성질 요약.
 *
 * 납음오행의 오행(金/火/木/土/水)은 일반 오행과 동일한 성질을 가지되,
 * 납음 고유의 의미가 부가된다.
 */
export const NABEUM_ELEMENT_PROPERTIES: Record<NabeumElement, { label: string; nature: string }> = {
  GEUM: {
    label: '금 (金)',
    nature: '수렴·결단력·의리·강인함. 납음 金은 주로 기물(器物)의 금속으로 쓰임새와 가치에 따라 성질이 달라진다.',
  },
  HWA: {
    label: '화 (火)',
    nature: '발산·열정·예의·밝음. 납음 火는 불의 종류(태양·번개·화로 등)에 따라 강도와 지속성이 다르다.',
  },
  MOK: {
    label: '목 (木)',
    nature: '생장·인자함·굽힘 없음. 납음 木은 수목의 크기와 종류에 따라 포부와 성격이 달라진다.',
  },
  TO: {
    label: '토 (土)',
    nature: '중용·신용·포용·안정. 납음 土는 위치(길가·성벽·지붕 등)에 따라 실용성과 역할이 달라진다.',
  },
  SU: {
    label: '수 (水)',
    nature: '지혜·유연성·저축·깊이. 납음 水는 수량과 흐름(샘·계곡·바다 등)에 따라 성질과 규모가 달라진다.',
  },
};

// ---------------------------------------------------------------------------
// 6. 납음 활용법 (納音 活用法)
// ---------------------------------------------------------------------------

/**
 * 납음 활용법 — 년주(年柱)의 납음으로 사람의 본질적 기운을 판단한다.
 *
 * 삼명통회(三命通會)에서는 년주 납음을 "본명(本命)"이라 하여
 * 사람의 근본적 기질과 운명의 토대로 삼았다.
 *
 * 활용 원칙:
 * 1. 년주 납음 = 본질적 기운(本命): 타고난 성격·기질·자질의 근본
 * 2. 일주 납음 = 현실적 발현: 실제 삶에서 드러나는 행동과 능력
 * 3. 월주 납음 = 사회적 환경: 성장기·가문·주변 환경의 영향
 * 4. 시주 납음 = 말년 결실: 노후와 자녀·후손의 운
 */
export interface NabeumHwalyongBeop {
  /** 활용 원칙 이름 */
  key: string;
  /** 대상 주(柱) */
  targetJu: string;
  /** 의미 설명 */
  uimi: string;
  /** 상세 해석 */
  sangse: string;
}

export const NABEUM_HWALYONG_TABLE: readonly NabeumHwalyongBeop[] = [
  {
    key: 'BONMYEONG',
    targetJu: '년주(年柱)',
    uimi: '본질적 기운 (本命)',
    sangse:
      '년주 납음은 삼명통회에서 가장 중시하는 납음으로, 사람의 타고난 기질·성격·근본 자질을 나타낸다. '
      + '예를 들어 년주가 甲子·乙丑이면 해중금(海中金)이니 바다 속에 잠긴 금처럼 '
      + '잠재력이 큰 사람이다. 년주 납음을 기준으로 대운·세운의 납음과의 관계를 살핀다.',
  },
  {
    key: 'HYEONSIL_BALLYEON',
    targetJu: '일주(日柱)',
    uimi: '현실적 발현',
    sangse:
      '일주 납음은 본인의 실제 행동과 능력으로 발현되는 기운이다. '
      + '년주 납음이 근본이라면 일주 납음은 현실에서 드러나는 모습으로, '
      + '년주와 일주 납음의 상생·상극 관계가 내면과 외면의 조화를 결정한다.',
  },
  {
    key: 'SAHOE_HWANGYEONG',
    targetJu: '월주(月柱)',
    uimi: '사회적 환경',
    sangse:
      '월주 납음은 성장 환경과 사회적 배경을 나타낸다. '
      + '가문의 기운, 초년의 환경, 교육 환경 등을 반영하며, '
      + '년주 납음과 월주 납음의 관계로 가문의 지원 여부를 판단한다.',
  },
  {
    key: 'MALNYEON_GYEOLSIL',
    targetJu: '시주(時柱)',
    uimi: '말년 결실',
    sangse:
      '시주 납음은 노후와 자녀·후손의 운을 나타낸다. '
      + '년주 납음이 시주 납음을 생(生)하면 자녀가 번성하고 노후가 편안하며, '
      + '시주 납음이 년주 납음을 극(剋)하면 자녀로 인한 근심이 있을 수 있다.',
  },
] as const;

// ---------------------------------------------------------------------------
// 7. 납음 오행 간의 상생(相生)·상극(相剋) 관계 해석
// ---------------------------------------------------------------------------

/**
 * 납음 오행의 상생·상극은 정오행과 동일한 원리를 따르되,
 * 납음 고유의 물상(物象)을 고려하여 더 구체적으로 해석한다.
 *
 * 예시:
 *   해중금(海中金, 金) + 장류수(長流水, 水) = 금생수(金生水): 상생 -> 길
 *   노중화(爐中火, 火) + 검봉금(劍鋒金, 金) = 화극금(火剋金): 상극 -> 흉
 *
 * 그러나 납음에서는 물상의 크기와 성질을 고려한 특수 해석이 있다:
 *   천하수(天河水)는 하늘의 물이니 일반적인 토극수(土剋水)가 통하지 않고,
 *   천상화(天上火)는 태양이니 일반적인 수극화(水剋火)가 잘 적용되지 않는다.
 */
export interface NabeumSangsaengGeuk {
  /** 관계 종류 */
  gwangye: 'SANGSAENG' | 'SANGGEUK';
  /** 관계 방향 설명 */
  banghyang: string;
  /** 일반 해석 */
  ilban: string;
  /** 납음 특수 해석 */
  teuksu: string;
}

export const NABEUM_SANGSAENG_GEUK: readonly NabeumSangsaengGeuk[] = [
  // 상생 5가지
  {
    gwangye: 'SANGSAENG',
    banghyang: '금생수(金生水): 金 -> 水',
    ilban: '금(金)이 물(水)을 생한다. 금이 녹아 물이 되듯 금의 기운이 물을 보강한다.',
    teuksu:
      '해중금이 간하수를 생하면 바다 속 금이 계곡물에 영양을 준다. '
      + '검봉금이 대해수를 생하면 칼날이 바다에 잠겨 쓸모가 줄어드는 면도 있으니 '
      + '물상의 규모를 고려해야 한다.',
  },
  {
    gwangye: 'SANGSAENG',
    banghyang: '수생목(水生木): 水 -> 木',
    ilban: '물(水)이 나무(木)를 생한다. 물이 나무에 수분을 공급하여 성장시킨다.',
    teuksu:
      '천하수(天河水)가 대림목(大林木)을 생하면 하늘에서 비가 내려 큰 숲을 적시니 대길하다. '
      + '그러나 대해수(大海水)가 양류목(楊柳木)을 생하면 바닷물이 버드나무를 삼키니 '
      + '수량이 과하여 오히려 해가 된다.',
  },
  {
    gwangye: 'SANGSAENG',
    banghyang: '목생화(木生火): 木 -> 火',
    ilban: '나무(木)가 불(火)을 생한다. 나무가 타서 불을 일으키고 유지시킨다.',
    teuksu:
      '송백목(松柏木)이 노중화(爐中火)를 생하면 소나무 장작이 화로에 좋은 불을 피운다. '
      + '양류목(楊柳木)이 벽력화(霹靂火)를 만나면 버드나무에 벼락이 떨어져 쪼개지니 '
      + '상생이라기보다 파괴적 관계가 될 수 있다.',
  },
  {
    gwangye: 'SANGSAENG',
    banghyang: '화생토(火生土): 火 -> 土',
    ilban: '불(火)이 흙(土)을 생한다. 불이 타고 남은 재가 흙이 된다.',
    teuksu:
      '천상화(天上火)가 대역토(大驛土)를 생하면 태양이 넓은 대지를 비추어 기름지게 하니 대길하다. '
      + '복등화(覆燈火)가 벽상토(壁上土)를 만나면 등불이 벽을 비추니 '
      + '작지만 확실한 도움을 준다.',
  },
  {
    gwangye: 'SANGSAENG',
    banghyang: '토생금(土生金): 土 -> 金',
    ilban: '흙(土)이 금(金)을 생한다. 흙 속에서 금속 광맥이 형성된다.',
    teuksu:
      '대역토(大驛土)가 사중금(沙中金)을 생하면 넓은 역참의 땅에서 사금을 캐니 풍요롭다. '
      + '노방토(路傍土)가 검봉금(劍鋒金)을 만나면 길가의 흙에서 명검이 나오기 어려우니 '
      + '토의 격이 금의 격에 미치지 못하면 상생의 효과가 약하다.',
  },
  // 상극 5가지
  {
    gwangye: 'SANGGEUK',
    banghyang: '금극목(金剋木): 金 -> 木',
    ilban: '금(金)이 나무(木)를 극한다. 도끼(金)가 나무를 자른다.',
    teuksu:
      '검봉금(劍鋒金)이 대림목(大林木)을 극하면 명검이 큰 나무를 베어 재목을 만드니 '
      + '오히려 쓸모를 다하는 것이나, 금박금(金箔金)이 송백목(松柏木)을 극하려 하면 '
      + '금박은 소나무를 자를 수 없으니 극의 효과가 없다.',
  },
  {
    gwangye: 'SANGGEUK',
    banghyang: '목극토(木剋土): 木 -> 土',
    ilban: '나무(木)가 흙(土)을 극한다. 나무뿌리가 흙을 파헤치고 양분을 뺏는다.',
    teuksu:
      '대림목(大林木)이 노방토(路傍土)를 극하면 큰 나무 뿌리가 길가의 흙을 뒤흔드니 흉하다. '
      + '그러나 양류목(楊柳木)이 성두토(城頭土)를 극하려 하면 '
      + '버드나무 뿌리가 성벽을 허물 수 없으니 극의 힘이 미약하다.',
  },
  {
    gwangye: 'SANGGEUK',
    banghyang: '토극수(土剋水): 土 -> 水',
    ilban: '흙(土)이 물(水)을 극한다. 흙으로 둑을 쌓아 물을 막는다.',
    teuksu:
      '성두토(城頭土)가 간하수(澗下水)를 극하면 성벽이 계곡물을 막으니 효과가 있다. '
      + '그러나 어떤 토(土)도 천하수(天河水)나 대해수(大海水)를 막을 수 없으니 '
      + '하늘의 물과 바다의 물에는 토극수가 적용되지 않는다. 이것이 납음의 특수성이다.',
  },
  {
    gwangye: 'SANGGEUK',
    banghyang: '수극화(水剋火): 水 -> 火',
    ilban: '물(水)이 불(火)을 극한다. 물로 불을 끈다.',
    teuksu:
      '대해수(大海水)가 산하화(山下火)를 극하면 바닷물이 산 아래 불을 완전히 끄니 대흉이다. '
      + '그러나 간하수(澗下水)가 천상화(天上火)를 극하려 하면 '
      + '계곡의 작은 물이 태양을 끌 수 없으니 수극화가 적용되지 않는다.',
  },
  {
    gwangye: 'SANGGEUK',
    banghyang: '화극금(火剋金): 火 -> 金',
    ilban: '불(火)이 금(金)을 극한다. 불로 금속을 녹인다.',
    teuksu:
      '노중화(爐中火)가 금박금(金箔金)을 극하면 화로의 불이 금박을 녹이니 대흉이다. '
      + '그러나 복등화(覆燈火)가 검봉금(劍鋒金)을 극하려 하면 '
      + '등잔불로 명검을 녹일 수 없으니 화극금이 적용되지 않는다. '
      + '납음에서는 물상의 강약(强弱)이 상극의 성립 여부를 좌우한다.',
  },
] as const;

// ---------------------------------------------------------------------------
// 8. 납음과 정오행(正五行)의 차이점
// ---------------------------------------------------------------------------

/**
 * 납음오행(納音五行)과 정오행(正五行)의 차이.
 *
 * 정오행: 천간·지지 각각에 고유하게 배속된 오행 (甲=木, 丙=火, 子=水 등).
 * 납음오행: 천간·지지 조합(간지 쌍)에서 도출되는 소리(音)의 오행.
 *
 * 예) 甲子의 정오행: 甲=木, 子=水 -> 목(木)·수(水)
 *     甲子의 납음: 해중금(海中金) -> 금(金)
 *     정오행으로는 木·水인데, 납음으로는 金이 된다.
 */
export interface JeongohhaengNabeumChai {
  /** 비교 항목 */
  hangmok: string;
  /** 정오행 특징 */
  jeongOhhaeng: string;
  /** 납음오행 특징 */
  nabeumOhhaeng: string;
}

export const JEONGOHHAENG_NABEUM_CHAI: readonly JeongohhaengNabeumChai[] = [
  {
    hangmok: '배속 기준',
    jeongOhhaeng: '천간·지지 각각에 독립적으로 오행이 배속된다. 甲乙=木, 丙丁=火, 子=水, 寅卯=木 등.',
    nabeumOhhaeng: '천간·지지 2개의 조합(간지 쌍)에 하나의 오행이 배속된다. 甲子·乙丑 한 쌍 = 海中金.',
  },
  {
    hangmok: '이론적 근거',
    jeongOhhaeng: '음양오행(陰陽五行) 기본 이론에 근거. 천간·지지의 본래 속성.',
    nabeumOhhaeng: '율려(律呂) 음률 이론에 근거. 간지 조합이 만드는 소리(音)를 오행에 대입.',
  },
  {
    hangmok: '활용 범위',
    jeongOhhaeng: '자평명리학(子平命理學)의 주류 분석 도구. 일간 기준 십신·용신 등의 핵심.',
    nabeumOhhaeng: '삼명통회(三命通會) 중심의 고전 명리에서 년주 본명을 판단하는 보조 도구.',
  },
  {
    hangmok: '오행 표현',
    jeongOhhaeng: '단순한 오행 속성 (木·火·土·金·水).',
    nabeumOhhaeng: '구체적 물상으로 표현 (海中金·爐中火·大林木 등 30가지). 같은 金이라도 검봉금과 금박금은 전혀 다른 성질.',
  },
  {
    hangmok: '현대 활용',
    jeongOhhaeng: '사주명리의 주된 분석 체계. 십신론·용신론·격국론 등 거의 모든 분석에 사용.',
    nabeumOhhaeng: '년주의 본질적 기운 파악, 궁합 판단, 택일(擇日) 등 보조적으로 활용. 일부 유파에서는 중시.',
  },
  {
    hangmok: '상극 적용',
    jeongOhhaeng: '오행 상극이 일률적으로 적용된다. 水는 항상 火를 극한다.',
    nabeumOhhaeng: '물상의 크기와 강약을 고려하여 상극의 성립 여부가 달라진다. 간하수(澗下水)는 천상화(天上火)를 극할 수 없다.',
  },
] as const;

// ---------------------------------------------------------------------------
// 9. 납음과 대운(大運)·세운(歲運) 활용
// ---------------------------------------------------------------------------

/**
 * 납음 오행의 대운·세운 활용 원칙.
 *
 * 삼명통회(三命通會) 기반의 납음 대운·세운 해석 원칙:
 *
 * 1. 년주 납음(本命)을 기준으로 대운·세운의 납음과의 상생·상극을 본다.
 * 2. 대운 납음이 본명 납음을 생(生)하면 -> 10년간 복이 증가한다.
 * 3. 대운 납음이 본명 납음을 극(剋)하면 -> 10년간 시련과 역경이 있다.
 * 4. 세운 납음이 본명 납음을 생하면 -> 그해에 좋은 기회가 온다.
 * 5. 세운 납음이 본명 납음을 극하면 -> 그해에 주의가 필요하다.
 * 6. 납음의 물상까지 고려하여 상극의 강도를 판단한다.
 */
export interface NabeumDaewunWonchik {
  /** 원칙 키 */
  key: string;
  /** 관계 */
  gwangye: string;
  /** 해석 */
  haeseok: string;
}

export const NABEUM_DAEWUN_WONCHIK: readonly NabeumDaewunWonchik[] = [
  {
    key: 'DAEWUN_SAENG_BONMYEONG',
    gwangye: '대운 납음 -> 생(生) -> 본명 납음',
    haeseok:
      '대운의 납음이 본명(년주 납음)을 생하면 10년간 귀인의 도움과 복록이 따른다. '
      + '예: 본명이 해중금(金)이고 대운이 대역토(土)이면 토생금(土生金)으로 길하다.',
  },
  {
    key: 'DAEWUN_GEUK_BONMYEONG',
    gwangye: '대운 납음 -> 극(剋) -> 본명 납음',
    haeseok:
      '대운의 납음이 본명을 극하면 10년간 시련과 장애가 따른다. '
      + '예: 본명이 해중금(金)이고 대운이 노중화(火)이면 화극금(火剋金)으로 주의해야 한다. '
      + '단, 물상의 강약을 고려하여 복등화(火)가 검봉금(金)을 극하려 해도 '
      + '등잔불로 명검을 녹일 수 없으니 실제 흉작용은 약하다.',
  },
  {
    key: 'BONMYEONG_SAENG_DAEWUN',
    gwangye: '본명 납음 -> 생(生) -> 대운 납음',
    haeseok:
      '본명이 대운 납음을 생하면 내 기운이 대운으로 빠져나가니 '
      + '설기(洩氣)의 작용으로 체력 소모나 재물 지출이 있을 수 있다. '
      + '다만 자녀·후배에게 도움을 주는 형태로 발현되기도 한다.',
  },
  {
    key: 'BONMYEONG_GEUK_DAEWUN',
    gwangye: '본명 납음 -> 극(剋) -> 대운 납음',
    haeseok:
      '본명이 대운을 극하면 내가 대운을 제압하는 형상이니 '
      + '강한 추진력과 성취가 있으나 무리하면 체력이 소진된다. '
      + '편재(偏財)를 극하는 것과 유사한 작용이다.',
  },
  {
    key: 'SEWUN_BONMYEONG_GWANGYE',
    gwangye: '세운 납음 <-> 본명 납음',
    haeseok:
      '세운(매년 태세)의 납음과 본명 납음의 관계로 그해의 길흉을 판단한다. '
      + '세운 납음이 본명을 생하면 그해에 좋은 기회가 오고, '
      + '세운 납음이 본명을 극하면 그해에 주의가 필요하다. '
      + '세운과 대운의 납음을 함께 보아 종합적으로 판단한다.',
  },
] as const;

// ---------------------------------------------------------------------------
// 10. 납음과 신살(神殺)의 관계
// ---------------------------------------------------------------------------

/**
 * 납음과 신살(神殺)의 관계.
 *
 * 삼명통회(三命通會)에서는 납음과 신살을 함께 활용하여
 * 더 정밀한 사주 해석을 한다.
 *
 * 핵심 원칙:
 * - 길신(吉神)이 좋은 납음과 함께하면 길운이 배가된다.
 * - 흉살(凶殺)이 강한 납음을 만나면 흉작용이 강해진다.
 * - 납음의 물상에 따라 신살의 발현 양상이 달라진다.
 */
export interface NabeumSinsalGwangye {
  /** 관계 원칙 키 */
  key: string;
  /** 신살 이름 */
  sinsal: string;
  /** 납음과의 관계 해석 */
  haeseok: string;
}

export const NABEUM_SINSAL_GWANGYE: readonly NabeumSinsalGwangye[] = [
  {
    key: 'CHEON_EUL_GWIIN_NABEUM',
    sinsal: '천을귀인(天乙貴人)',
    haeseok:
      '천을귀인이 강한 납음(검봉금·대림목·천상화 등)과 함께하면 '
      + '귀인의 도움이 강력하게 발현되어 큰 성취를 이룬다. '
      + '약한 납음(금박금·양류목 등)과 함께하면 귀인의 도움이 있으나 그 힘이 작다.',
  },
  {
    key: 'DO_HWA_SAL_NABEUM',
    sinsal: '도화살(桃花煞)',
    haeseok:
      '도화살이 화(火) 계열 납음(노중화·천상화 등)과 함께하면 '
      + '이성적 매력이 강렬하게 발현되어 열정적이고 화끈한 매력이 된다. '
      + '수(水) 계열 납음(천하수·대해수 등)과 함께하면 '
      + '깊고 신비로운 매력으로 발현되며, 감성적이고 몽환적인 분위기를 풍긴다.',
  },
  {
    key: 'YEOK_MA_SAL_NABEUM',
    sinsal: '역마살(驛馬煞)',
    haeseok:
      '역마살이 대역토(大驛土)와 함께하면 역참(驛站)의 기운과 중복되어 '
      + '이동과 변화의 기운이 극대화된다. 무역·외교·여행업에서 큰 성공을 거둔다. '
      + '장류수(長流水)와 함께하면 물처럼 흘러가는 이동이니 자연스럽고 순탄하다.',
  },
  {
    key: 'HWA_GAE_SAL_NABEUM',
    sinsal: '화개살(華蓋煞)',
    haeseok:
      '화개살이 천하수(天河水)와 함께하면 은하수의 높은 경지에서 '
      + '종교적·철학적 깨달음을 얻는 형상이니 고승·학자의 기질이다. '
      + '벽력화(霹靂火)와 함께하면 번개 같은 영감(靈感)으로 '
      + '예술적 창작에 뛰어난 능력을 발휘한다.',
  },
  {
    key: 'YANG_IN_NABEUM',
    sinsal: '양인(羊刃)',
    haeseok:
      '양인이 검봉금(劍鋒金)과 함께하면 칼날의 기운이 극강(極强)하여 '
      + '군인·무관·외과의사로서 대성하나, 다른 이를 다치게 할 위험도 크다. '
      + '금박금(金箔金)과 함께하면 양인의 살기(殺氣)가 약해져 '
      + '결단력은 있으나 부드러운 방식으로 발현된다.',
  },
  {
    key: 'WON_JIN_SAL_NABEUM',
    sinsal: '원진살(怨嗔煞)',
    haeseok:
      '원진살이 강한 화(火) 납음과 함께하면 분노와 갈등이 격렬해지고, '
      + '수(水) 납음과 함께하면 원한이 깊고 오래 지속되는 양상을 보인다. '
      + '토(土) 납음과 함께하면 갈등이 표면에 드러나지 않고 내면에 쌓인다.',
  },
] as const;

// ---------------------------------------------------------------------------
// 11. 납음 강약(强弱) 등급 체계
// ---------------------------------------------------------------------------

/**
 * 납음오행 30종의 상대적 강약 등급.
 *
 * 같은 오행이라도 납음의 물상에 따라 강약이 크게 다르다.
 * 이 등급은 동일 오행 내에서의 상대적 크기를 나타낸다.
 *
 * 등급: DAE(大) > JUNG(中) > SO(小)
 *   DAE  = 해당 오행 중 가장 크고 강한 납음
 *   JUNG = 보통 크기의 납음
 *   SO   = 해당 오행 중 가장 작고 약한 납음
 */
export type NabeumGangYak = 'DAE' | 'JUNG' | 'SO';

export const NABEUM_GANGYAK: Record<NabeumName, NabeumGangYak> = {
  // 금(金) 6종
  HAE_JUNG_GEUM:  'JUNG',  // 해중금: 바다 속 묻힌 금 - 잠재적 크기는 크나 드러나지 않음
  GEOM_BONG_GEUM: 'DAE',   // 검봉금: 벼려진 칼날 - 금 중 가장 강함
  BAEK_NAP_GEUM:  'SO',    // 백납금: 아직 단련 안 된 연한 금
  SA_JUNG_GEUM:   'JUNG',  // 사중금: 모래 속 묻힌 금 - 중간 크기
  GEUM_BAK_GEUM:  'SO',    // 금박금: 극히 얇은 금 - 금 중 가장 약함
  CHA_CHEON_GEUM: 'SO',    // 차천금: 장신구 금 - 작고 장식적

  // 화(火) 6종
  RO_JUNG_HWA:    'JUNG',  // 노중화: 화로 속 불 - 통제된 중간 불
  SAN_DU_HWA:     'JUNG',  // 산두화: 산꼭대기 불 - 밝으나 바람에 약함
  BYEOK_RYEOK_HWA:'DAE',   // 벽력화: 번개불 - 순간 최강이나 지속성 부족
  SAN_HA_HWA:     'SO',    // 산하화: 산 아래 불 - 은은하고 작음
  BOK_DEUNG_HWA:  'SO',    // 복등화: 등잔불 - 화 중 가장 작음
  CHEON_SANG_HWA: 'DAE',   // 천상화: 태양 - 화 중 가장 크고 강함

  // 목(木) 6종
  DAE_RIM_MOK:    'DAE',   // 대림목: 큰 숲 - 목 중 가장 큼
  YANG_RYU_MOK:   'SO',    // 양류목: 버드나무 - 유연하나 약함
  SONG_BAEK_MOK:  'DAE',   // 송백목: 소나무 - 강인한 생명력
  PYEONG_JI_MOK:  'JUNG',  // 평지목: 평지 나무 - 보통
  SANG_JA_MOK:    'JUNG',  // 상자목: 뽕나무 - 실용적 중간 크기
  SEOK_RYU_MOK:   'JUNG',  // 석류목: 석류나무 - 열매가 풍성한 중간 나무

  // 토(土) 6종
  RO_BANG_TO:     'SO',    // 노방토: 길가 흙 - 토 중 가장 약함
  SEONG_DU_TO:    'JUNG',  // 성두토: 성벽 흙 - 구조물 위의 흙
  OK_SANG_TO:     'JUNG',  // 옥상토: 지붕 흙 - 높으나 실속 부족
  BYEOK_SANG_TO:  'SO',    // 벽상토: 벽 위 흙 - 얇은 회벽
  DAE_YEOK_TO:    'DAE',   // 대역토: 큰 역참 땅 - 토 중 가장 넓음
  SA_JUNG_TO:     'SO',    // 사중토: 모래 속 흙 - 가볍고 유동적

  // 수(水) 6종
  GAN_HA_SU:      'SO',    // 간하수: 계곡 아래 물 - 수 중 가장 작음
  CHEON_JUNG_SU:  'SO',    // 천중수: 샘물 - 작지만 끊이지 않음
  JANG_RYU_SU:    'JUNG',  // 장류수: 긴 강물 - 중간 크기
  CHEON_HA_SU:    'DAE',   // 천하수: 은하수 - 가장 높은 물
  DAE_GYE_SU:     'JUNG',  // 대계수: 큰 계곡물 - 역동적 중간 크기
  DAE_HAE_SU:     'DAE',   // 대해수: 바다 - 수 중 가장 큼
};

// ---------------------------------------------------------------------------
// 12. 유틸리티 함수
// ---------------------------------------------------------------------------

/**
 * 두 납음 간의 상생·상극 관계를 판별한다.
 *
 * @param a - 첫 번째 납음의 오행
 * @param b - 두 번째 납음의 오행
 * @returns 관계 유형과 방향
 *   'A_SAENG_B' = a가 b를 생함
 *   'B_SAENG_A' = b가 a를 생함
 *   'A_GEUK_B'  = a가 b를 극함
 *   'B_GEUK_A'  = b가 a를 극함
 *   'BIWA'      = 같은 오행 (비화, 比和)
 */
export type NabeumGwangyeType =
  | 'A_SAENG_B'
  | 'B_SAENG_A'
  | 'A_GEUK_B'
  | 'B_GEUK_A'
  | 'BIWA';

/** 상생 순환: 금->수->목->화->토->금 */
const SAENG_MAP: Record<NabeumElement, NabeumElement> = {
  GEUM: 'SU',
  SU:   'MOK',
  MOK:  'HWA',
  HWA:  'TO',
  TO:   'GEUM',
};

/** 상극 순환: 금->목->토->수->화->금 */
const GEUK_MAP: Record<NabeumElement, NabeumElement> = {
  GEUM: 'MOK',
  MOK:  'TO',
  TO:   'SU',
  SU:   'HWA',
  HWA:  'GEUM',
};

export function nabeumGwangye(
  a: NabeumElement,
  b: NabeumElement,
): NabeumGwangyeType {
  if (a === b) return 'BIWA';
  if (SAENG_MAP[a] === b) return 'A_SAENG_B';
  if (SAENG_MAP[b] === a) return 'B_SAENG_A';
  if (GEUK_MAP[a] === b) return 'A_GEUK_B';
  // 나머지 경우: b가 a를 극함
  return 'B_GEUK_A';
}

/**
 * 두 납음 항목의 관계를 종합 분석한다.
 *
 * @param entryA - 첫 번째 납음 항목
 * @param entryB - 두 번째 납음 항목
 * @returns 관계 유형과 설명
 */
export interface NabeumGwangyeResult {
  /** 관계 유형 */
  type: NabeumGwangyeType;
  /** 한글 관계명 */
  label: string;
  /** 물상 기반 해석 */
  mulsangHaeseok: string;
}

export function analyzeNabeumGwangye(
  entryA: NabeumEntry,
  entryB: NabeumEntry,
): NabeumGwangyeResult {
  const type = nabeumGwangye(entryA.element, entryB.element);
  const gangA = NABEUM_GANGYAK[entryA.name];
  const gangB = NABEUM_GANGYAK[entryB.name];

  const GWANGYE_LABEL: Record<NabeumGwangyeType, string> = {
    A_SAENG_B: '상생 (生)',
    B_SAENG_A: '상생 (生)',
    A_GEUK_B:  '상극 (剋)',
    B_GEUK_A:  '상극 (剋)',
    BIWA:      '비화 (比和)',
  };

  let mulsangHaeseok: string;

  if (type === 'BIWA') {
    mulsangHaeseok =
      `${entryA.hangul}(${entryA.hanja})과 ${entryB.hangul}(${entryB.hanja})은 `
      + '같은 오행이니 비화(比和)관계로, 서로 돕고 힘을 합하나 '
      + '과하면 한쪽으로 치우쳐 균형이 깨질 수 있다.';
  } else if (type === 'A_SAENG_B' || type === 'B_SAENG_A') {
    const saeng = type === 'A_SAENG_B' ? entryA : entryB;
    const su = type === 'A_SAENG_B' ? entryB : entryA;
    mulsangHaeseok =
      `${saeng.hangul}(${saeng.hanja})이 ${su.hangul}(${su.hanja})을 생(生)하니 길하다.`;
  } else {
    // 상극
    const geuk = type === 'A_GEUK_B' ? entryA : entryB;
    const piGeuk = type === 'A_GEUK_B' ? entryB : entryA;
    const geukGang = type === 'A_GEUK_B' ? gangA : gangB;
    const piGeukGang = type === 'A_GEUK_B' ? gangB : gangA;

    if (geukGang === 'SO' && piGeukGang === 'DAE') {
      mulsangHaeseok =
        `${geuk.hangul}(${geuk.hanja})이 ${piGeuk.hangul}(${piGeuk.hanja})을 극(剋)하려 하나 `
        + '극하는 쪽이 약하고 극당하는 쪽이 강하니 실제 극의 효과가 미약하다.';
    } else if (geukGang === 'DAE' && piGeukGang === 'SO') {
      mulsangHaeseok =
        `${geuk.hangul}(${geuk.hanja})이 ${piGeuk.hangul}(${piGeuk.hanja})을 극(剋)하니 `
        + '극하는 쪽이 강하고 극당하는 쪽이 약하여 크게 흉하다.';
    } else {
      mulsangHaeseok =
        `${geuk.hangul}(${geuk.hanja})이 ${piGeuk.hangul}(${piGeuk.hanja})을 극(剋)한다.`;
    }
  }

  return {
    type,
    label: GWANGYE_LABEL[type],
    mulsangHaeseok,
  };
}

/**
 * 년주(年柱)의 간지로 본명(本命) 납음을 반환한다.
 *
 * 삼명통회 기준, 년주의 납음이 본명이다.
 *
 * @param yearStem   - 년간 인덱스 (甲=0 ... 癸=9)
 * @param yearBranch - 년지 인덱스 (子=0 ... 亥=11)
 * @returns 본명 납음 항목, 유효하지 않으면 undefined
 */
export function getBonmyeongNabeum(
  yearStem: StemIdx,
  yearBranch: BranchIdx,
): NabeumEntry | undefined {
  return getNabeum(yearStem, yearBranch);
}

/**
 * 사주 사주(四柱) 전체의 납음 목록을 반환한다.
 *
 * @param pillars - [년주, 월주, 일주, 시주] 각각 { stem, branch }
 * @returns 4개 납음 항목 배열 (유효하지 않은 주는 undefined)
 */
export function getSajuNabeumList(
  pillars: ReadonlyArray<{ stem: StemIdx; branch: BranchIdx }>,
): Array<NabeumEntry | undefined> {
  return pillars.map((p) => getNabeum(p.stem, p.branch));
}
