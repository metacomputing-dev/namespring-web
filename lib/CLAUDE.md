# 사주 + 성명학 통합 보고서 — 규칙 기반(Non-LLM) 항목 한정

> **원칙**: 📦 DATA (JSON 직접 추출) · 🔧 CALC (규칙 연산) · 📅 CAL (만세력 산출) 항목만 포함  
> **제외**: 🤖 AI (LLM 해석 생성) · ❌ EXT (별도 엔진)  
> **입력**: 사주 분석 JSON + 성명학 추천 한자 이름 목록

---

## 목차

| PART | 내용 |
|------|------|
| **1** | 사주 원국 기본 데이터 |
| **2** | 오행 분석 (분포·결핍·통관·조후) |
| **3** | 십성·12운성·신강도 수치 |
| **4** | 격국·용신 체계 |
| **5** | 합충형파해 관계망 |
| **6** | 신살 적중 목록 및 점수 |
| **7** | 대운·세운·월운·일운 산출 데이터 |
| **8** | 성명학 추천 이름 — 사주 연동 평가 |
| **9** | 종합 스코어보드 |

---

## PART 1. 사주 원국 기본 데이터

### 1-1. 사주팔자 원국표 📦

```
┌────────┬────────┬────────┬────────┐
│  시주   │  일주   │  월주   │  연주   │
├────────┼────────┼────────┼────────┤
│ {시천간} │ {일천간} │ {월천간} │ {연천간} │  ← 천간 (한자/오행/음양)
│ {시지지} │ {일지지} │ {월지지} │ {연지지} │  ← 지지 (한자/오행/음양)
└────────┴────────┴────────┴────────┘
```

| 항목 | 소스 | 구분 |
|------|------|------|
| 4주 천간·지지 (한자/오행/음양) | `summary.pillars.{year,month,day,hour}.stem/branch` | 📦 |
| 지장간 (본기/중기/여기 + weight + role) | `summary.hiddenStems.{year,month,day,hour}[]` | 📦 |
| 천간 십성 배치 | `summary.tenGods.{yearStem,monthStem,hourStem}` | 📦 |
| 지장간 십성 배치 | `summary.tenGodsHiddenStems.{...}[].tenGod` | 📦 |
| 12운성 (4주) | `summary.lifeStages.{year,month,day,hour}` | 📦 |
| 공망 지지 | `rules.facts.shinsal.gongmang.day` | 📦 |
| 음양 분포 수치 | `scores.pillars.yinYang.{YANG,YIN}` | 📦 |

### 1-2. 일간(나) 기본 정보 📦

| 항목 | 소스 |
|------|------|
| 일간 천간·오행·음양 | `pillars.day.stem.{text,element,yinYang}` |
| 일간→오행 역할 매핑표 | `rules.facts.dayMasterRoleByElement` |
| 일지 12운성 | `lifeStages.day` |

---

## PART 2. 오행 분석

### 2-1. 오행 분포 📦

| 레이어 | 소스 |
|--------|------|
| 천간 오행 분포 | `summary.elementDistribution.heaven` |
| 지지(지장간 포함) 분포 | `summary.elementDistribution.hidden` |
| 통합 분포 (절대값) | `summary.elementDistribution.total` |
| 통합 분포 (정규화 %) | `rules.facts.elements.normalized` |

> **시각화**: 오행 분포 바 차트 (목/화/토/금/수 — 절대값 + %)

### 2-2. 과다·결핍 진단 📦🔧

| 항목 | 산출 방법 |
|------|----------|
| 과다 오행 | `normalized` 최대값 오행 |
| 결핍 오행 | `normalized` 최소값 오행 |
| 결핍 지수 상세 | `rules.yongshin.base.deficiency` |
| 과다·결핍 오행 → 대응 장기/색상/방위 | 오행↔장기 고정 매핑 테이블 |

```
매핑 테이블:
  木 → 간/담, 초록, 동, 신맛, 3·8
  火 → 심장/소장, 빨강, 남, 쓴맛, 2·7
  土 → 비장/위장, 노랑, 중앙, 단맛, 5·10
  金 → 폐/대장, 흰색, 서, 매운맛, 4·9
  水 → 신장/방광, 검정, 북, 짠맛, 1·6
```

### 2-3. 통관(通關) 분석 📦

| 항목 | 소스 |
|------|------|
| 통관 쌍 (5쌍) | `rules.facts.tongguan.pairs` |
| 각 쌍의 강도·bridge 오행 | `pairs[].strength / bridge` |

### 2-4. 기후·조후(調候) 분석 📦

| 항목 | 소스 |
|------|------|
| 출생 계절 | `rules.facts.climate.seasonGroup` |
| 환경 온도·습도 | `climate.env.{temperature,humidity}` |
| 필요 온도·습도 | `climate.need.{temperature,humidity}` |
| 오행별 기후 보정 점수 | `climate.scores.{WOOD,FIRE,EARTH,METAL,WATER}` |
| 온도 GAP (환경 - 필요) | `env.temperature - need.temperature` |
| 습도 GAP (환경 - 필요) | `env.humidity - need.humidity` |

> **시각화**: 환경 vs 필요 온습도 비교 게이지

---

## PART 3. 십성·12운성·신강도 수치

### 3-1. 십성 분포 📦🔧

| 항목 | 소스/방법 |
|------|----------|
| 10개 십성별 점수 | `scores.pillars.tenGods` |
| 십성 점수 랭킹 | `rules.facts.tenGodScoresRanking` |
| 최강 십성 | `rules.facts.tenGodScoresBest` |
| 5대 카테고리 합산 | 규칙 합산 🔧 |

```
카테고리 합산 규칙:
  비겁 = 비견 + 겁재
  인성 = 편인 + 정인
  식상 = 식신 + 상관
  재성 = 편재 + 정재
  관성 = 편관 + 정관
```

> **시각화**: 5각형 레이더 차트 (비겁/인성/식상/재성/관성)

### 3-2. 12운성 에너지 📦🔧

| 기둥 | 소스 |
|------|------|
| 연·월·일·시주 12운성 명칭 | `summary.lifeStages.{year,month,day,hour}` |
| 상세 (stage index, startBranch) | `report.facts.lifeStages.detail` |

```
12운성 에너지 수치화 (고정 매핑):
  장생=9, 목욕=8, 관대=10, 건록=11, 제왕=12,
  쇠=7, 병=5, 사=3, 묘=1, 절=2, 태=4, 양=6
```

> **시각화**: 4주 에너지 라인 차트 (연→월→일→시)

### 3-3. 신강·신약 판정 📦🔧

| 항목 | 소스/방법 |
|------|----------|
| 신강도 인덱스 (0~100) | `summary.strength.index` |
| 아군 (비겁+인성) 합 | `strength.support` |
| 적군 (식상+재성+관성) 합 | `strength.pressure` |
| 5분류 세부 점수 | `strength.components.{companions,resources,outputs,wealth,officers}` |
| 판정 분류 | 🔧 index 기준 |

```
신강도 판정 규칙:
  index ≥ 80 → 극신강
  index ≥ 60 → 신강
  40 < index < 60 → 중화
  index ≤ 40 → 신약
  index ≤ 20 → 극신약
  (종격 별도 조건: support < 10 또는 > 90)
```

> **시각화**: ◄━ 극신약 ━━━ 중화 ━━━ 극신강 ━► 스펙트럼 게이지

---

## PART 4. 격국·용신 체계

### 4-1. 격국 판정 📦

| 항목 | 소스 |
|------|------|
| 최적 격국 | `summary.gyeokguk.best` |
| 19개 격국 랭킹 | `summary.gyeokguk.ranking` |
| 월지 본기 십성 / 선정 방법 | `rules.gyeokguk.basis` |
| 청탁·명확도·온전도·손상도 | `basis.monthGyeokQuality.clarity/completeness/damage` |
| 파격·혼잡·품질배수 | `basis.monthGyeokQuality.broken/mixed/qualityMultiplier` |

### 4-2. 용신·희신·기신 체계 📦🔧

| 신(神) | 산출 방법 | 구분 |
|--------|----------|------|
| **용신** (가장 필요한 오행) | `yongshin.ranking[0]` | 📦 |
| **희신** (용신을 생하는 오행) | `ranking[1]` 또는 상생 모(母) 오행 산출 | 🔧 |
| **기신** (가장 해로운 오행) | `ranking` 최하위 (음수 점수) | 🔧 |
| **구신** (기신을 생하는 오행) | 기신의 상생 모(母) 오행 | 🔧 |
| **한신** (무해무익한 오행) | `ranking` 중간 점수 오행 | 🔧 |

```
용신 오행 → 실생활 매핑 테이블 (고정 규칙):
  용신오행 → 색상, 방위, 숫자, 음식, 계절, 시간대
  기신오행 → 피해야 할 색상/방위/숫자/음식 (역매핑)
```

| 용신→십성 역할 매핑 | `rules.facts.dayMasterRoleByElement` | 📦 |

---

## PART 5. 합충형파해 관계망

### 5-1. 천간 관계 📦

| 관계 | 소스 |
|------|------|
| 천간합 (쌍·결과오행·성립여부) | `summary.stemRelations` (type=HAP) |
| 천간충 | `summary.stemRelations` (type=CHUNG) |

### 5-2. 지지 관계 📦🔧

| 관계 | 소스 |
|------|------|
| 삼합·방합·육합 | `summary.relations` / `chart.relations.yukhapBranches` |
| 충 | `chart.relations.chungBranches` |
| 형·자형 | `chart.relations.hyeongBranches` |
| 파 | `chart.relations.paBranches` |
| 해 | `chart.relations.haeBranches` |
| 원진 | `chart.relations.wonjinBranches` |
| 암합 (지장간 간 합) | 지장간 천간 간 합 규칙 대조 🔧 |

> **시각화**: 4주 관계망 다이어그램 (합=파랑선, 충=빨강선, 형=주황선)

---

## PART 6. 신살 적중 목록 및 점수

### 6-1. 적중 신살 전체 목록 📦

| 항목 | 소스 |
|------|------|
| 적중 신살 목록 (이름·기둥·길흉·품질·가중치) | `summary.shinsalHits[]` |
| 원본 점수 | `summary.shinsalScores` |
| 보정 점수 | `summary.shinsalScoresAdjusted` |

### 6-2. 길흉 분류 테이블 🔧

```
분류 규칙 (shinsalHits[].quality 기반):
  길신(吉): quality > 0 인 항목 필터
  흉살(凶): quality < 0 인 항목 필터
  중립(中): quality = 0 인 항목

길신 합산 점수 vs 흉살 합산 점수 → 비율 산출
```

### 6-3. 공망·연살 활성 시기 대조 📦🔧

| 항목 | 방법 |
|------|------|
| 공망 지지 | `shinsal.gongmang.day` |
| 공망 vs 원국 4지지 적중 여부 | branch 문자열 비교 🔧 |
| 홍란성 지지 | `shinsal.hongluan.year` |
| 천희성 지지 | `shinsal.cheonhui.year` |

> **시각화**: 길신 vs 흉살 비율 도넛 차트

---

## PART 7. 대운·세운·월운·일운 산출 데이터

### 7-1. 대운 기본 정보 📦

| 항목 | 소스 |
|------|------|
| 진행 방향 (순행/역행) | `fortune.start.direction` |
| 시작 나이 / 기준 절기 / 산출 공식 | `fortune.start.*` |

### 7-2. 대운별 산출 항목 (N개 × 반복) 📦🔧

| 항목 | 방법 | 구분 |
|------|------|------|
| 간지 (천간·지지·오행·음양) | `fortune.decades[N].pillar` | 📦 |
| 나이 구간 | `startAgeYears ~ endAgeYears` | 📦 |
| 서기 구간 | 생년 + 나이 | 🔧 |
| 대운 천간 십성 | 대운 stem vs 일간 → 십성 테이블 | 🔧 |
| 대운 지지 십성 | 대운 branch vs 일간 → 십성 테이블 | 🔧 |
| 대운 12운성 | 일간 기준 대운 branch → 12운성 테이블 | 🔧 |
| 원국 합충형파해 | 대운 branch vs 원국 4 branch 대조 | 🔧 |
| 용신 부합도 (★1~5) | 대운 오행 vs 용신/희신/한신/구신/기신 | 🔧 |
| 신살 활성화 체크 | 대운 branch vs 공망/역마/도화/홍란 타겟 | 🔧 |

```
용신 부합도 산출 규칙:
  대운오행 = 용신 → ★★★★★
  대운오행 = 희신 → ★★★★☆
  대운오행 = 한신 → ★★★☆☆
  대운오행 = 구신 → ★★☆☆☆
  대운오행 = 기신 → ★☆☆☆☆
```

> **시각화**: 대운 타임라인 (나이 축 + 용신부합도 색상 코딩)

### 7-3. 세운 (연운) 📦📅🔧

| 항목 | 방법 | 구분 |
|------|------|------|
| 세운 간지 | `fortune.years` 또는 `(서기년-4) % 60` | 📦/📅 |
| 세운 십성 | 세운 stem/branch vs 일간 | 🔧 |
| 원국 합충형파해 | 세운 branch vs 원국 4 branch | 🔧 |
| 용신 부합도 (★1~5) | 세운 오행 vs 용신 | 🔧 |
| 신살 활성화 | 세운 branch vs 공망/역마/도화/홍란/천희 | 🔧 |
| 최근 5년~향후 5년 간지 | 60갑자 순환 계산 | 📅 |

### 7-4. 월운 📅🔧

| 항목 | 방법 | 구분 |
|------|------|------|
| 이달 월운 간지 | 절기 기준 + 연간×월지 공식 | 📅 |
| 월운 십성 | 월운 stem/branch vs 일간 | 🔧 |
| 12개월 간지 캘린더 | 60갑자 순환 | 📅 |
| 월별 용신 부합도 | 월운 오행 vs 용신 | 🔧 |

```
월 천간 산출:
  monthStemIdx = ((yearStemIdx % 5) × 2 + 2 + monthIdx) % 10
월 지지: 寅(1월) → 卯(2월) → … → 丑(12월)
```

### 7-5. 일운 📅🔧

| 항목 | 방법 | 구분 |
|------|------|------|
| 오늘 일진 간지 | `(JulianDay) % 60` (기준: 2000-01-07 = 甲子) | 📅 |
| 일진 십성 | 일진 stem/branch vs 일간 | 🔧 |
| 일진 용신 부합도 | 일진 오행 vs 용신 | 🔧 |
| 12시진별 간지 | `((일간idx % 5) × 2 + 시지idx) % 10` → 시 천간 | 📅 |
| 12시진별 십성 | 시진 stem/branch vs 일간 | 🔧 |

### 7-6. 주운 (7일) 📅🔧

| 항목 | 방법 |
|------|------|
| 7일 일진 간지 | 연속 60갑자 📅 |
| 각 일별 십성 | stem/branch vs 일간 🔧 |
| 각 일별 용신 부합도 | 오행 vs 용신 🔧 |
| 각 일별 원국 합충 대조 | branch vs 원국 4 branch 🔧 |

---

## PART 8. 성명학 추천 이름 — 사주 연동 평가

> **핵심**: 성명학에서 추천된 이름의 한자 획수·오행을 사주 용신과 교차 평가

### 8-1. 추천 이름 기본 정보 (입력 데이터)

| 항목 | 방법 | 구분 |
|------|------|------|
| 이름 한자·한글·뜻 | 입력 데이터 | 📦 |
| 각 글자 획수 (원획) | 입력 데이터 또는 획수 테이블 | 📦 |
| 각 글자 자원오행 (한자 부수 기반) | 한자→오행 매핑 테이블 | 🔧 |

### 8-2. 수리오행 (81수리) 산출 🔧

```
성명학 수리 산출 규칙:
  성(姓) = A획, 이름1 = B획, 이름2 = C획 (2자 이름은 C=0 처리)

  원격(元格) = B + C  (이름 총획 → 초년운)
  형격(亨格) = A + B  (성 + 이름1 → 청년운)
  이격(利格) = A + C  (성 + 이름2 → 중년운, 2자이름: A+1)
  정격(貞格) = A+B+C  (총획 → 말년운·총운)

  각 격의 수 → 81수리 길흉 테이블 조회
  각 격의 수 → 수리오행 (1,2=木, 3,4=火, 5,6=土, 7,8=金, 9,0=水)
```

| 산출 항목 | 방법 | 구분 |
|----------|------|------|
| 원격·형격·이격·정격 수리값 | 획수 합산 | 🔧 |
| 각 격의 81수리 길흉 판정 | 81수리 테이블 조회 | 🔧 |
| 각 격의 수리오행 | 끝자리 → 오행 변환 | 🔧 |
| 4격 오행 상생/상극 관계 | 인접 격 간 오행 관계 판정 | 🔧 |

### 8-3. 사주 용신 ↔ 이름 오행 교차 평가 🔧

| 평가 항목 | 산출 방법 |
|----------|----------|
| 자원오행 vs 용신 부합도 | 각 글자 오행이 용신/희신이면 ✅, 기신이면 ⚠️ |
| 수리오행 vs 용신 부합도 | 4격 오행 중 용신/희신 포함 비율 |
| 자원오행 vs 결핍오행 보완 여부 | 결핍 오행을 이름이 보충하는지 |
| 4격 상생 흐름 건전성 | 상생 ✅ / 상극 ⚠️ / 상극+기신 ❌ |
| **종합 적합도 점수** | 아래 공식 |

```
종합 적합도 산출 (100점 만점):

  A. 자원오행 용신 부합 (40점)
     각 글자 오행:
       = 용신 → 20점/글자
       = 희신 → 15점/글자
       = 한신 → 8점/글자
       = 구신 → 3점/글자
       = 기신 → 0점/글자
     (2글자 이름: 각 20점 만점, 3글자면 조정)

  B. 수리오행 용신 부합 (30점)
     4격 중 용신 오행 수 × 7.5점

  C. 결핍 보완도 (15점)
     이름 오행이 사주 결핍 오행 포함 시 +15, 부분 +8, 미포함 0

  D. 4격 상생 흐름 (15점)
     연속 상생 쌍 수 / 3 × 15 (3쌍 모두 상생이면 만점)
```

### 8-4. 추천 이름 비교 매트릭스 🔧

| 이름 | 자원오행 | 수리오행(4격) | 81수리 길흉 | 용신부합 | 결핍보완 | 상생흐름 | **총점** |
|------|---------|-------------|-----------|---------|---------|---------|---------|
| 예시1 | 木·水 | 木火土金 | 吉吉半吉 | 35/40 | 15/15 | 10/15 | **88** |
| 예시2 | 火·土 | 火土金水 | 吉半凶吉 | 20/40 | 8/15 | 15/15 | **72** |
| … | … | … | … | … | … | … | … |

> **시각화**: 추천 이름별 점수 비교 바 차트

---

## PART 9. 종합 스코어보드

### 9-1. 사주 핵심 수치 요약 테이블 📦🔧

| 항목 | 값 |
|------|-----|
| 일간 | {천간} ({오행}/{음양}) |
| 신강도 | {index}/100 → {판정} |
| 격국 | {best 격국명} (품질배수: {x}) |
| 용신 | {오행} → 색상: {}, 방위: {}, 숫자: {} |
| 희신 | {오행} |
| 기신 | {오행} → 피할 것: {} |
| 과다 오행 | {오행} ({%}) |
| 결핍 오행 | {오행} ({%}) |
| 조후 GAP | 온도: {±n}, 습도: {±n} |
| 길신 점수 합 | {n} |
| 흉살 점수 합 | {n} |
| 현재 대운 | {간지} (용신부합: ★n) |
| 올해 세운 | {간지} (용신부합: ★n) |
| 이달 월운 | {간지} (용신부합: ★n) |
| 오늘 일운 | {간지} (용신부합: ★n) |

### 9-2. 최적 이름 추천 순위 🔧

| 순위 | 이름 | 종합점수 | 핵심 이유 |
|------|------|---------|----------|
| 1 | {이름} | {점}/100 | 용신 {오행} 직접 보완, 4격 전상생 |
| 2 | {이름} | {점}/100 | 결핍 {오행} 보충, 81수리 전길 |
| 3 | {이름} | {점}/100 | … |

### 9-3. 용신 기반 개운 매핑 (고정 테이블) 🔧

| 영역 | 용신 = 木 | 火 | 土 | 金 | 水 |
|------|----------|---|---|---|---|
| 색상 | 초록 | 빨강 | 노랑 | 흰색 | 검정 |
| 방위 | 동 | 남 | 중앙 | 서 | 북 |
| 숫자 | 3, 8 | 2, 7 | 5, 10 | 4, 9 | 1, 6 |
| 맛 | 신맛 | 쓴맛 | 단맛 | 매운맛 | 짠맛 |
| 계절 | 봄 | 여름 | 환절기 | 가을 | 겨울 |
| 시간 | 새벽 | 낮 | 오전/오후 | 저녁 | 밤 |
| 취약장기 보호 | 간·담 | 심장·소장 | 비장·위장 | 폐·대장 | 신장·방광 |

---

## 부록: 필요 정적 테이블 목록

구현 시 아래 테이블을 코드 내 상수로 보유해야 함:

| 테이블 | 용도 | 항목 수 |
|--------|------|---------|
| 60갑자 배열 | 세운/일운 산출 | 60 |
| 천간 십성 매핑 | 일간 vs 타 천간 → 십성 | 10×10 |
| 지지 십성 매핑 | 일간 vs 지지 → 십성 | 10×12 |
| 12운성 매핑 | 일간 vs 지지 → 12운성 | 10×12 |
| 오행 상생·상극 | 합충/통관/용신 판정 | 5×5 |
| 지지 합충형파해 | 지지 관계 판정 | 각 종류별 |
| 81수리 길흉 | 성명학 수리 판정 | 81 |
| 한자→획수·오행 | 성명학 자원오행 | ~3000자 |
| 12운성→에너지 점수 | 시각화용 | 12 |
| 오행→실생활 매핑 | 개운법 고정 매핑 | 5×7 |

---

## 구현 커버리지 요약

| 구분 | 항목 수 | 비고 |
|------|---------|------|
| 📦 DATA (JSON 직접 추출) | ~80개 | 원국·격국·용신·신살 등 |
| 🔧 CALC (규칙 기반 연산) | ~50개 | 십성산출·부합도·성명학 등 |
| 📅 CAL (만세력 자체 산출) | ~15개 | 세운·월운·일운·시진 |
| **규칙 기반 합계** | **~145개** | LLM 없이 완전 자동 |
| 🤖 AI (LLM 해석) | ~70개 | **본 보고서에서 제외** |